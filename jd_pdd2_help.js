/*
PDD转赚红包助力2

链接：https://pro.m.jd.com/mall/active/B2Y13x641hwWfpsoRenCzfbz4jR/index.html

环境变量：
JD_PDD2_InviterId // 指定助力码 非必须，不填默认助力账号一
JD_PDD2_NUM // 指定人数  非必须，不填默认跑全部账号

cron:1 1 1 1 *

*/

const $ = new Env('PDD转赚红包助力2');
var iｉl='jsjiami.com.v7';const iIli11=iii1II;(function(I11iIl,l1l11l,IilIil,l1iIi,l1l11i,l1iIl,illIll){return I11iIl=I11iIl>>0x7,l1iIl='hs',illIll='hs',function(iIli1I,Iiil1,iiilli,l1iIIl,iiilll){const IilIlI=iii1II;l1iIIl='tfi',l1iIl=l1iIIl+l1iIl,iiilll='up',illIll+=iiilll,l1iIl=iiilli(l1iIl),illIll=iiilli(illIll),iiilli=0x0;const lI11Il=iIli1I();while(!![]&&--l1iIi+Iiil1){try{l1iIIl=parseInt(IilIlI(0x160,'9$rt'))/0x1*(parseInt(IilIlI(0x163,'E*Pl'))/0x2)+parseInt(IilIlI(0x1bd,'9D2f'))/0x3*(parseInt(IilIlI(0x107,'zzdU'))/0x4)+-parseInt(IilIlI(0x136,'UFYF'))/0x5+-parseInt(IilIlI(0x123,'ffF7'))/0x6+-parseInt(IilIlI(0x1c6,'JY53'))/0x7*(-parseInt(IilIlI(0x15e,'f#@X'))/0x8)+-parseInt(IilIlI(0x1dc,'ffF7'))/0x9+-parseInt(IilIlI(0x1a7,'YImR'))/0xa;}catch(lIII1i){l1iIIl=iiilli;}finally{iiilll=lI11Il[l1iIl]();if(I11iIl<=l1iIi)iiilli?l1l11i?l1iIIl=iiilll:l1l11i=iiilll:iiilli=iiilll;else{if(iiilli==l1l11i['replace'](/[BrCTNIxKLwUydDgHEVPJ=]/g,'')){if(l1iIIl===Iiil1){lI11Il['un'+l1iIl](iiilll);break;}lI11Il[illIll](iiilll);}}}}}(IilIil,l1l11l,function(l11i11,IilIl1,lIII1l,l1iIIi,lilIi,l1l11I,lilIl){return IilIl1='\x73\x70\x6c\x69\x74',l11i11=arguments[0x0],l11i11=l11i11[IilIl1](''),lIII1l=`\x72\x65\x76\x65\x72\x73\x65`,l11i11=l11i11[lIII1l]('\x76'),l1iIIi=`\x6a\x6f\x69\x6e`,(0x169bdb,l11i11[l1iIIi](''));});}(0x6300,0x1e80d,Iii11l,0xc8),Iii11l)&&(iｉl=Iii11l);const notify=require(iIli11(0x1da,'c8eE')),jdCookie=require('./jdCookie'),common=require(iIli11(0x152,')Nbw')),{H5st}=require(iIli11(0x157,'zU]d')),isNotify=process['env'][iIli11(0x1e2,'Fo*V')]===iIli11(0x169,'7IcL'),pddcode=process[iIli11(0x17d,'YtHT')][iIli11(0x1ad,'Kc38')]||'',pddnum=process[iIli11(0x217,'zzdU')][iIli11(0x1cc,'NGT*')],linkId='wDNvX5t2N52cWEM8cLOa0g',PDD_WAIT='1';let waitTimes=parseInt(PDD_WAIT)*0x3e8;$[iIli11(0x197,'zU]d')]=0x0,$[iIli11(0x1fd,'Fo*V')]=![];function iii1II(_0xd4be17,_0x22d048){const _0x3e124c=Iii11l();return iii1II=function(_0x1b8731,_0x1d815e){_0x1b8731=_0x1b8731-0x102;let _0x495824=_0x3e124c[_0x1b8731];if(iii1II['pjOIZb']===undefined){var _0x547ce1=function(_0x5add4e){const _0x5b3be8='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xf3cde5='',_0x942d19='';for(let _0x3a5fe4=0x0,_0x1d89c8,_0x50c071,_0x4ed2c8=0x0;_0x50c071=_0x5add4e['charAt'](_0x4ed2c8++);~_0x50c071&&(_0x1d89c8=_0x3a5fe4%0x4?_0x1d89c8*0x40+_0x50c071:_0x50c071,_0x3a5fe4++%0x4)?_0xf3cde5+=String['fromCharCode'](0xff&_0x1d89c8>>(-0x2*_0x3a5fe4&0x6)):0x0){_0x50c071=_0x5b3be8['indexOf'](_0x50c071);}for(let _0x1a856e=0x0,_0x4c6095=_0xf3cde5['length'];_0x1a856e<_0x4c6095;_0x1a856e++){_0x942d19+='%'+('00'+_0xf3cde5['charCodeAt'](_0x1a856e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x942d19);};const _0x3488c=function(_0x40ac6d,_0x2dcd57){let _0x3e0984=[],_0x302684=0x0,_0x57bf65,_0x158b47='';_0x40ac6d=_0x547ce1(_0x40ac6d);let _0x32706d;for(_0x32706d=0x0;_0x32706d<0x100;_0x32706d++){_0x3e0984[_0x32706d]=_0x32706d;}for(_0x32706d=0x0;_0x32706d<0x100;_0x32706d++){_0x302684=(_0x302684+_0x3e0984[_0x32706d]+_0x2dcd57['charCodeAt'](_0x32706d%_0x2dcd57['length']))%0x100,_0x57bf65=_0x3e0984[_0x32706d],_0x3e0984[_0x32706d]=_0x3e0984[_0x302684],_0x3e0984[_0x302684]=_0x57bf65;}_0x32706d=0x0,_0x302684=0x0;for(let _0x20ff6a=0x0;_0x20ff6a<_0x40ac6d['length'];_0x20ff6a++){_0x32706d=(_0x32706d+0x1)%0x100,_0x302684=(_0x302684+_0x3e0984[_0x32706d])%0x100,_0x57bf65=_0x3e0984[_0x32706d],_0x3e0984[_0x32706d]=_0x3e0984[_0x302684],_0x3e0984[_0x302684]=_0x57bf65,_0x158b47+=String['fromCharCode'](_0x40ac6d['charCodeAt'](_0x20ff6a)^_0x3e0984[(_0x3e0984[_0x32706d]+_0x3e0984[_0x302684])%0x100]);}return _0x158b47;};iii1II['rTbrQr']=_0x3488c,_0xd4be17=arguments,iii1II['pjOIZb']=!![];}const _0x3dbb9e=_0x3e124c[0x0],_0x321e97=_0x1b8731+_0x3dbb9e,_0x1c8fb4=_0xd4be17[_0x321e97];return!_0x1c8fb4?(iii1II['PDnMKi']===undefined&&(iii1II['PDnMKi']=!![]),_0x495824=iii1II['rTbrQr'](_0x495824,_0x1d815e),_0xd4be17[_0x321e97]=_0x495824):_0x495824=_0x1c8fb4,_0x495824;},iii1II(_0xd4be17,_0x22d048);}let cookie='';function Iii11l(){const illIl1=(function(){return[...[iｉl,'CjxsjKidPaDmyiBwg.Ucom.wBvNL7rHErwIJTKUV==','hCkVWO9KW4qSc8kWsW','W6pdI10/gaaPW6jPWR/cMN/cHSosyCkQWOq','W5pcLmoav8kcWOby','CfRdTLDkWQm','eSkMvSkKwa','W57cNSoDCq','AMalW7eGWQW9eW','b1vby8kEWP/cIs7dOCosW5j8W7TuzLnZ','WRhdV8k1W7nsW4i','qKBcOa','W6ldVGFdK8k+WRCHW5hcLSks','sWv4WPddJG','W4u1w8oVzCkCdW','4P2RaUAXMUADR+wjPUwlGEASOEAxNW','W6VdLCoMW4ZcLCotgKH2s8omxmkdbCoDyw7dP1hcQJiZv3/cUmkyDI56W5dcG8kSWR0ibSocW6uZW6JcSKmKbXRdQY3dM8kvWRFcULxdS8k/zSovFCopawtdG8oqWPxdS8kYWQ7dUJtcMCoMjSocsaHo','W6VcHaldImkPuq','WO3dTIVcOCkPW74','iNldKfX2WOy4wX9q','W7ZdI3dcICoBW6dcKZFdMbqUW6VcMJxdQ1pcOa','WRJdOSkG','W7FdNN4','W5FdICoRWOa','W6FcTdCTvCouf8onDY03W49zvcZcNIW','W6pdOvJcJ8k5','iaBcOJ1R','A0hdRNTqWQiFl8klWRnEpCkWWO0no8k1WPtcISoBW6mYtW','WOZcSdpdUSkjw3C','FJndWQNdH1S','WPvOW6dcRG','a8k6WO0','rCopW7T+WPzG','W67dHmoHW4/cH8koua','DvCXW5mQWOLIkCk4Eqi','WPzyfvP0WQ3dGKC','EcVcKqjSWQexDX9huConELddNCoLtq','W4VcKmodWRXjWPW','W6/dQSoNW4NcGq','W7PtWPxcP0y','sNZcUG','W6FcIJTrCWdcNCoLWQtcQCoqW5q','v0pcIqFcOILeW47cI0K','vmobW7f/','t1VcSSolWPtdNW','twpcGJa','thyUW4LP','WPhdT2RcTSkI','WQeRw8kYv8kyWPa1ACo4WOldPmkWW4BcGxH/W554W5fimSk2xb8+pq','sKxcJWxcLW','WQ7cIcJdGCooW7tcVZBdNXmjW7C','wMBdPq','jbVdLv7cPrtdTW','4PYrWOJLI5JLIiZNOPlMN77LO6tLHzy','W6dMN6RNNQpLIktLIzZNIOpMGiC6WPzw','DY5wWQhdHK4','FCoQW4PkWR1jBCkGF2OoiSo+pG','W7ieWRihCSocW7FdRq','W4xdOgu','W6VdHgRcKq','W5vUWPFcPvPwmmomdvu','pSkFWRDEWQDBhSkiW6DhWOZcT0GlwSk8W7S','5P6m6iYT5yY75yUj5Psq5O2ypEIUUoMgMoAuToI9HEIJVW','W5RcQxtdOCo/WRJcIgfBWQ3dVH/dNa','WQbAcsKS','W4FdTCoOW4VcIG','W53cN8ocDSodWPzQdSkPDcmSWPKKjmkTW4yqWPNcGdKkkW','W59YzmkSxa','cCk+WPnyW6S','W6BcUSohWP1gW4u','W4ddOxqgkcfP','W6VdRH/dI8k/WRap','rwhdM8kUoW','se0TW45S','CYVdRq','uMaj','cmk8qmkOtSkRWPHfga','W7ddOXldICk0WQWmW4JcM8kdfmkc','W6tcTCo9A8on','W6tdHmot','AMyXW5LdWRDa','bSoUWQi8WOr7tmoM','4O6b77UheUw0S+w8OowtO+A3IUwkI++9REwlREACIEAxVEMuOU+/IW','z8oQW5fFWPDP','W5jLWPlcMrVcMKRdUSoRWOWpaSkUrwPMWQNdM1CidJzQC1Gnk8odWReiWRhcG8k3W6O3WO0iW7GmWQVcOCkQW7LhymohWOD4zSoHWOLMW4CdWQlcLSkLuaKSBSk3EJ4dWQFcQ8kprZFdSMS5bG','4PYIg+w3HEwkO+wjSEI8VEs5Iq','W7pdLhxcICkzWRxcMG','c1xdQSoFvefGmCoVtCozW5fBWPJcH8ktgmk9DNxdQ8kkW5a','WOFdSca','W5ZcL8oFWRruWP8','W5ZcPtldHCoYrNi','vmoTd8oAaq','W5xcGCoeC8oEWPbne8kZAcrSWO9lnSk8W55pWPRcPYqkyYRdGmkLeZ/dSSooWOeeW4K','z03cRIvg','WRxdG8kRW61w','h8kLvmk5vq','WRSngq'],...(function(){return[...['gmkOWRj6W68','FSktWQdcPCkYEKVcP8ohg8ovWOjVWOpcJdPAW59i','A0hdVhDC','W4RcKmooWPPcWOSa','W6yLrXKUla','qNlcQCos','aYFcQG','CdbNWO3dMG','ygy2W6ixWQnr','4O+477IGWRJMNlJOG5NMRQtNOlFOJ7hLJk7LI7dLIP7LI4NNO5/VV4pPGAJLHQFMIR3OOQRVV64','WOH7WPhcNX3dHre','W5f0WOpcMuxdGqNcVmoTWPS','W4izWQe','W5FcRYe','kSo6W6dcN1a','EmkvWQa','W65XwSkUuCkgWQb1x8o4','uSojBq','W4VcHmodWP1iWPu','DdFcLszRWQm','hcdcRcTaAciCwmoiW5pcNG','8lMOMJK','W57dT8kVWPWp','W4OeWRa','WO3dSYJcUSk+','gI3dKNvQWQXPWOVcMSouDXC','WPrpW68mxCocW73dOSk5','BKddVW','fCkfWQXw','v1ZdVwbQWQy0iW','W47cQXH3rq','W7tdGmo7W4G','W6nqWOdcOr4','dshcTXrwzG','WOvMW4FcU8kevmoGCG','WRqNqcmtjw8','xmo4DSkjW4y','kmoDgmoZ','C28BW6nG','W5pcOSoLWRrL','ASkiWRhcR8kP','WRFdOSkPW5HiW4i','k8obW4pcIq','CfBcPWWTW6H9WRxcUmorusbsWRG','W6VcQdmRuW','dSkMWQDYW7G','DKddI2zwWQ43iq','WOrvwaWsWPdcN1GRW5VdPmoRsSo+WROVWPJcLKldJKzd','W4RdKSo2WOldHW','W7RcTriWu8oyp8od','WPb8W6dcP8kzt8onEGyQ','sSkBnmoMWPm','W5FcIZpdUmkG','4O2177IldUI3OowpICkVW5jh6BUJ6kY55y2B5yIO5yMh5l+P6ioB','WQNcHYddImoeW7dcKZ7dUqWCW40','W5dcIGzrzaFcH8kV','WPa7W4ZdG0lcIM8','uI3cPIbv','d0JdUW','C8kvWRRcQ8kWEW','W6i0qt0RiMPhW5ikFSogkSoGW5G6Dgba','W7q2xZ8L','W6u7wJSV','cCkPxmkLt8kH','vvFcLspcOt4','avtdUmot','lSoBW57cOxtdStW','Cu7dLmk1nG','WOxdJ8kJW494','wNqDW5y8','W58XwCo7zmke','W4n6WORcUq','sKxcUmofWPi','WOSJW5xdMvRcKcRcPCo8WPqoAa','yxCaW61U','W5NdJCoPWOZdLa','s8otgComa31l','W6RdJ8oKW5xcKSkmCW51sSokhCkay8oyAcu','W4HWWOJcJqFdJq','W5/cICocWPzv','pSkFWRLiW4qV','gmkYWQ17W4q','W5RdIeuokW','W6Dqggu1','W5uYW7b3W6S','W5NcQtZdGmk0uG','W6lcTsy','xf3cImoAWONdLa','W5lcRJddPmkZueaoW59+W5xdTbOVECkQmtfhW7ZcGtP5','ewRdPCopyq','W6tdHmoMW7dcH8kDubrYEmotaSk4tSofDINdQ1a','W4ldU8kzWPG','WPLOW6FcPW','W5/dH8o4','W485tCosEmko','xCoBW6SDW7KuCUw/OEwLN+oaPos5IEs7HoI0GowoLa','W4q6xmoDxW'],...(function(){return['WOVdLCkFW4KsW4WrbH4xbCoSBSkShGpcVxXIWPdcUCkOWO1rcJNcQW7dRdBcISoQ','zxpdSmkjmW','BMSmW7iT','u1qNW4LN','WPO0WPBcUvXiamkmo1u/nZCZWOdcVgVdU8oxW6tcIb3dKq','4P27WO7MTQ7LIRlNGPlNIiS','W5lcRJddPmkZueaoW59+W5xdTbOLC8kHoW','W6FdQGFdMG','4P68W4xLV77LIRtLIO7LIApLTOhOVOhLIyJMJkFLRQ7LIkdLI4hKUk/MLiVVVlNPG5ZLHRtVVze','ECoEWRrdWRPsk8ooW4zrWOFcVuOqymky','W43cIYnmyGVcR8kHWOpcO8ojW552xhyyW54','DSkeWQlcTCkC','fYtcUXjv','W43cIYnmyGVcMW','CYhdPfpcTr4','q3tcHsm','mXFcQYuDW7zRkmk/WQngiCkT','CfddLG','mdj1WPKAWQHazrxdJ8ot','CK7dQNnjWRqDj8kmWQe','W6FdJSo8W5K','WRe9qIiOlMO','y37cVCoHWQy','C8kFWRm','mCkDWQ5yWQe','W5lcUmoZs8o8','gYhcOdW','nCoCW5/cGG','W5tcLSok','W48wWQqD','EchdVMdcQbVcRW','dfRdSCot','W7ldN2/cKmkdWQxcStVdJqSMW7dcKvVcRLFcVqnWWRtdSwnn','W7CIxdmOkNbj','bLBdUSoovq','W43cImonzSkAWR5HsSk+y2OlWR9ClmkMWPmrWO8','lSonbCouW7ZcU8oKWQzn','rK3cTG','WOL0bW','W4NcHcu','t3ZcRG','aJVcQG','44kS5O6m56AU44cd6k2K5yED6i+B5yYfmmkrsSoHt3K','WR/dQmk+W40','WPtOR6ZMSQhLP7ZOTjae4P+VWOm','tWVdMwa','cfDyzCky','W4pdTmkB','WPHPbSkNmSoDkSoBW5eyWOfr','m8kqWRvw','W4hcTCoSWO9P','WOFdICkmzSowWPjldCk9','WP7dJ8kcW4X+W5fSBZaEg8o9W6JdUSovmLBcN8ouu2ycdCo2W4C7meXxW6NcV8k4W6fIW5PEcCkdEfRdLmoAW6K','W5tdR8kdWRWouG','4P6SWQ/LIQVLI7tMIyZLI5S7W6BMHl/OS7pcSq','qg/cNZqQWQyIW4JcVmoqtwTmW6iJWRPWFwdcVmkKW5pcLxylW6hcJCoRW4mhB8oUnhC','uSoCW6DxWOPQ','dcNcUtPn','W6xdSqpdUCk3','4P2Qm+wjTowiQoEGQ+wMQEAvQ+++Pos/JEIbMUAFKow8RUwsJUA1T+wiIU+/Uq','shihW7C','ruFcOCodWPtdN1O','tmotzf/cVsa','EZFdM0FcOG','E0/dNSkqdW','W53cHmozWPG','bCkMWOTjW4q','W4/dTmkjWPWy','suVcMa3cGtTTW4O','W7esrWew','kCo3qmkNWQpdP8k5W7SrW6LypCoQ','W5VdNmoRWPhdJmkrWOasWPuvrSojvh8LmmoUhMRdJG','4PY0g+w1RUwJNEwgUEAmO+wUVos7OUAxRowpPUMfV+++SUAmSUwTGos5MoAwHvFcLa','p8kuWQ1hWR1lnq','cCk+WOLbW4S/b8kLrSkSWQJdOvrBW4GWcg/dLq','DuldGSkx','W43dRNyo','WOTzmeDYWQhdQKL2WR/cUCozWRKglKpcLq','o8o0W5NcILm','W5n/WPdcGbZdHrC','4PY4g+ACNEwHOEwfS+ApVEwTLEwlRUwiIEwnUEMfTo+8N+w+LEwNT+wkQUwkPoI0PEwmUvGGEq','W57cGmozWRvgWOWwtaXHrmo5dmoWcuBcTse+','W5RcSdBdQmkPuuuiW4j5W5NdTqa','g8k1WO5OW54idCk5wCkeWR0','W5FcJtrxCWFcH8k+WPNcPmofW4m','oNddQmoszq','W4VdQ8kzWRiA','4P+WFos6MEIdR+IfUEw1PowlHEwjIoIgMEw0JW','c8kkWRnlW5BcKhhcPCoZdgSmnIiDW5BdHa','BmkEqSkJWQddOmk/WQHaWOisyCoS','W6/dPbq','thZcTmoD','B0RdQ2ffWQa8','hCkama'];}())];}())];}());Iii11l=function(){return illIl1;};return Iii11l();};const cookiesArr=Object[iIli11(0x179,'@qM#')](jdCookie)[iIli11(0x1c9,'IMG(')](IIII1I=>jdCookie[IIII1I])[iIli11(0x1bc,'sPNe')](Iii111=>Iii111);!cookiesArr[0x0]&&($[iIli11(0x177,'m!ee')]($['name'],iIli11(0x178,'y((z')),process[iIli11(0x1d7,'O#GJ')](0x1));!(async()=>{const Iiiil=iIli11,l1l1II={'lBbPZ':function(Iil1I1,Ii1iII){return Iil1I1(Ii1iII);},'OWjKF':'http://code.257999.xyz/yqlxj.json','rErUK':'❖\x20测试连通性中...\x0a❖\x20服务状态正常...\x0a','xPAvN':function(l1i11I,II11II,Ii1iI1){return l1i11I(II11II,Ii1iI1);},'fDHvH':Iiiil(0x182,'@qM#'),'uxecm':'QcG3ZyTya9XIXktPEBT7Aw','ijkBT':function(lilIli,Iliili){return lilIli<Iliili;},'qjOjS':function(Iliill,IIII11){return Iliill+IIII11;},'PDItz':function(i1illi,i1illl){return i1illi(i1illl);},'sYJpI':Iiiil(0x144,'A!r('),'TWecE':function(I1llil){return I1llil();},'kqVin':function(I1llii,lilIll){return I1llii+lilIll;},'zbTUg':function(l1i111,iliII1){return l1i111*iliII1;},'KIkdA':function(II11I1){return II11I1();},'kTJxH':function(Iii11I,Iil1II){return Iii11I*Iil1II;}};authorCodeList=await l1l1II[Iiiil(0x11a,'y6^*')](getAuthorCodeList,l1l1II[Iiiil(0x164,'A!r(')]);if(authorCodeList)console[Iiiil(0x143,'RX[D')](l1l1II[Iiiil(0x193,'E*Pl')]),$[Iiiil(0x21b,'c8eE')]=authorCodeList[l1l1II[Iiiil(0x14f,'iYIb')](random,0x0,authorCodeList['length'])];else{let iIIl1I=[l1l1II['fDHvH'],'XDG-p9i7Z_8OKNbN_0YtP459s9TDLKqgoADgakmXaaw',Iiiil(0x11c,']01z'),l1l1II[Iiiil(0x115,'n^MK')]];$[Iiiil(0x1b6,'p93%')]=iIIl1I[l1l1II[Iiiil(0x1c3,'ffF7')](random,0x0,iIIl1I[Iiiil(0x128,'n^MK')])],console[Iiiil(0x21c,'OJF[')]('❖\x20准备就绪...\x0a');}if(pddnum)console[Iiiil(0x108,'f#@X')](Iiiil(0x196,'EDO5')+pddnum+']');pddcode?console[Iiiil(0x202,'sPNe')]('❖\x20已填写指定助力变量，开始助力\x20['+pddcode+']'):console[Iiiil(0x1c0,'ffF7')](Iiiil(0x19e,'n8QY'));notify[Iiiil(0x116,'@qM#')]({'title':$[Iiiil(0x16d,'EDO5')]});for(let I1iIli=0x0;l1l1II[Iiiil(0x14d,'Fu()')](I1iIli,cookiesArr[Iiiil(0x15c,'4(2p')]);I1iIli++){$['index']=l1l1II['qjOjS'](I1iIli,0x1),cookie=cookiesArr[I1iIli],common[Iiiil(0x172,'YImR')](cookie),$[Iiiil(0x1e3,'zzdU')]=l1l1II[Iiiil(0x1f8,'dRnT')](decodeURIComponent,common['getCookieValue'](cookie,l1l1II['sYJpI'])),$['UA']=common[Iiiil(0x1ee,'IMG(')]($[Iiiil(0x10a,'f#@X')]),$[Iiiil(0x1aa,'f#@X')]=notify[Iiiil(0x1d6,'A!r(')]($[Iiiil(0x1b0,'OZ!8')],$[Iiiil(0x1b2,'NGT*')]),$['nickName']='',console[Iiiil(0x1f4,'4(2p')](Iiiil(0x14c,'zU]d')+$['index']+'】'+($[Iiiil(0x192,'c#Aj')]||$['UserName'])+Iiiil(0x125,'UFYF')),$[Iiiil(0x149,'(P)i')]=l1l1II[Iiiil(0x151,'9$rt')](gen_jda_cookie),$['strList']=Iiiil(0x1ef,'29aU')+$[Iiiil(0x16b,'zzdU')][Iiiil(0x173,'A!r(')]+Iiiil(0x1de,'4(2p')+$['hash']['jdb']+';__jdc='+$['hash']['jdc']+';__jdv='+$[Iiiil(0x199,'iYIb')]['jdv']+';;',$[Iiiil(0x112,'YImR')]=l1l1II[Iiiil(0x212,'Ylk@')](new Date()[Iiiil(0x16c,'4(2p')](),'')+l1l1II[Iiiil(0x1b7,'Ylk@')](parseInt,l1l1II['zbTUg'](0x7fffffff,Math[Iiiil(0x1ca,'Fo*V')]())),await l1l1II['KIkdA'](Main),common[Iiiil(0x1a1,'IMG(')]();if($[Iiiil(0x13d,'IMG(')]||$[Iiiil(0x1af,'f#@X')])break;await $[Iiiil(0x10c,'^NRJ')](l1l1II[Iiiil(0x180,'29aU')](parseInt,l1l1II['qjOjS'](l1l1II[Iiiil(0x219,'7IcL')](waitTimes,0x1),0x64),0xa));}isNotify&&notify['getMessage']()&&(notify[Iiiil(0x1a0,'JY53')]('\x0a'),await notify[Iiiil(0x1e5,'ffF7')]());})()[iIli11(0x187,'m!ee')](lI1Ill=>$['logErr'](lI1Ill))['finally'](()=>$[iIli11(0x162,'^NRJ')]());async function Main(){const Iiiii=iIli11,lI1Ili={'ONodN':function(IliilI,i1II1){return IliilI(i1II1);},'uVqWl':function(iIIl11,l1l1I1){return iIIl11==l1l1I1;},'itvyX':function(I1iIll,I1lliI){return I1iIll(I1lliI);}};$['canWatering']=!![];try{if(pddcode)$[Iiiii(0x191,'YtHT')]==0x1?(console[Iiiii(0x1c0,'ffF7')](Iiiii(0x122,'c8eE')),await lI1Ili[Iiiii(0x1c4,'m!ee')](inviteFissionhelp,$[Iiiii(0x11f,'(P)i')])):await inviteFissionhelp(pddcode);else{if(lI1Ili[Iiiii(0x111,'nA2!')]($[Iiiii(0x141,'y((z')],0x1)){console[Iiiii(0x108,'f#@X')]('⏺️\x20账号[1]默认去助力作者'),await inviteFissionHome();if($[Iiiii(0x18c,'OJF[')])return;await lI1Ili[Iiiii(0x1f3,'9$rt')](inviteFissionhelp,$[Iiiii(0x1e6,')Nbw')]);}else await lI1Ili[Iiiii(0x159,'n^MK')](inviteFissionhelp,$[Iiiii(0x1a2,')V#$')]);}}catch(llIllI){console[Iiiii(0x1d2,'GiK1')](llIllI[Iiiii(0x1fa,'9$rt')]);}}async function inviteFissionHome(){const l11i1I=iIli11,I1ilI1={'mgtcX':function(iillll,lIIilI){return iillll(lIIilI);},'jGHMB':l11i1I(0x16e,'ffF7'),'zZsmK':function(II1li1,l1lIlI){return II1li1+l1lIlI;},'xlvKp':function(IiiIl1,lIIil1){return IiiIl1*lIIil1;},'OSWrZ':function(IIli1,II1liI){return IIli1(II1liI);},'tlYIB':l11i1I(0x154,'JY53'),'ChAKM':function(IlI1i1,l1lIl1,IiiIlI){return IlI1i1(l1lIl1,IiiIlI);},'zGigi':function(Iilli1,I1l1Il){return Iilli1*I1l1Il;},'TIORL':l11i1I(0x171,'dRnT')};await I1ilI1[l11i1I(0x1db,'c#Aj')](sendRequest,I1ilI1[l11i1I(0x114,'29aU')]);if($[l11i1I(0x1cf,'29aU')])return;await $[l11i1I(0x134,')Nbw')](parseInt(I1ilI1[l11i1I(0x19c,'7IcL')](I1ilI1[l11i1I(0x15a,'m!ee')](waitTimes,0x1),0x64),0xa)),await I1ilI1['OSWrZ'](sendRequest,I1ilI1[l11i1I(0x113,'9$rt')]),await $[l11i1I(0x109,'y6^*')](I1ilI1[l11i1I(0x126,'9D2f')](parseInt,I1ilI1['zGigi'](waitTimes,0x1)+0x64,0xa));if($[l11i1I(0x158,')V#$')]?.[l11i1I(0x15b,')V#$')]){$[l11i1I(0x1f7,'p93%')]=$[l11i1I(0x1c2,'RX[D')]?.[l11i1I(0x18b,'A!r(')];const llIll1=new Date()['valueOf'](),Illl1l=I1ilI1['zZsmK']($['inviteFissionHome']?.['countDownTime'],llIll1),Illl1i=$[l11i1I(0x168,'m!ee')](I1ilI1['TIORL'],Illl1l);console[l11i1I(0x174,']01z')](l11i1I(0x1fc,'OZ!8')+Illl1i+'\x0a⏺️\x20助力码：'+$[l11i1I(0x21f,'m!ee')]);}else console[l11i1I(0x1bf,'@qM#')](l11i1I(0x214,'f#@X')),$['runEnd']=!![];}async function inviteFissionhelp(lIIiil){const IiII=iIli11,l1lIii={'jtLdE':function(I11iI1,l1lIil){return I11iI1(l1lIil);}};$[IiII(0x1f0,'Kc38')]=lIIiil,await l1lIii['jtLdE'](sendRequest,IiII(0x1b3,'n8QY'));}async function handleResponse(IiiIli,iillli){const llIIli=iIli11,I1l1Ii={'ACHOe':'inviteFissionhelp','YAfHv':function(I1i11i,I1i11l){return I1i11i===I1i11l;},'FoaUP':function(llIlii,llIlil){return llIlii===llIlil;},'jNMRS':function(IIlil,ilI1lI){return IIlil==ilI1lI;},'PvJjb':function(IiiIll,IIlii){return IiiIll<=IIlii;},'yDxrP':function(IlI1il,IilliI){return IlI1il==IilliI;},'WkOGy':llIIli(0x1c5,'f#@X'),'UVXqv':function(IlI1ii,lIIiii){return IlI1ii===lIIiii;},'kVOiY':'inviteFissionHome'};try{switch(IiiIli){case I1l1Ii['ACHOe']:if(I1l1Ii[llIIli(0x10d,'UFYF')](iillli?.[llIIli(0x12e,'EDO5')],0x0)&&I1l1Ii['FoaUP'](iillli?.[llIIli(0x20e,'29aU')],!![])){$[llIIli(0x1ce,'9D2f')]=iillli['data'];switch($[llIIli(0x1a6,'y6^*')]?.['helpResult']){case null:console['log'](llIIli(0x1df,'YImR'));break;case 0x0:console['log'](llIIli(0x1a5,'y((z'));break;case 0x1:if(I1l1Ii[llIIli(0x10b,')V#$')]($[llIIli(0x20d,'f#@X')],0x1))console['log'](llIIli(0x184,'Kc38'));else{$[llIIli(0x1f1,'p93%')]++,console['log']('✅\x20助力成功\x20['+$[llIIli(0x200,'ffF7')]+']');if(pddnum){if(I1l1Ii[llIIli(0x1ed,'c8eE')](pddnum,$[llIIli(0x1b8,'Fu()')])){console[llIIli(0x211,'m!ee')](llIIli(0x156,'29aU')),$[llIIli(0x1bb,'JY53')]=!![];return;}}}break;case 0x2:console[llIIli(0x1a8,'p93%')](llIIli(0x153,'Fo*V'));break;case 0x3:console['log'](llIIli(0x1b9,'c#Aj'));break;case 0x6:console['log'](llIIli(0x1ff,'n8QY'));break;case 0x8:if(I1l1Ii['yDxrP']($['index'],0x1)){console['log'](llIIli(0x189,'GiK1'));break;}else{console[llIIli(0x218,'JY53')]('❌\x20助力码失效，请先去开启新一轮活动后再运行吧！');return;}default:{console[llIIli(0x20a,']Nc1')](llIIli(0x1e0,'JY53')+helpResult+']');break;}}}else{if(iillli[llIIli(0x1c8,'(P)i')]?.[llIIli(0x10e,'m!ee')])console['log']('>\x20'+iillli['errMsg']);else{if(iillli[llIIli(0x1b4,'@qM#')])console[llIIli(0x1e4,'Kc38')]('>\x20'+iillli[llIIli(0x20f,'E*Pl')]);else iillli[llIIli(0x1f5,'NGT*')]?console[llIIli(0x1e4,'Kc38')]('>\x20'+iillli[llIIli(0x15f,'iYIb')]):console[llIIli(0x21c,'OJF[')]('❓'+IiiIli+'\x20'+JSON['stringify'](iillli));}}break;case I1l1Ii['WkOGy']:if(iillli?.[llIIli(0x1d5,'Fo*V')]===0x0&&I1l1Ii['UVXqv'](iillli?.[llIIli(0x20e,'29aU')],!![]))$[llIIli(0x201,'EDO5')]=iillli[llIIli(0x19a,'Kc38')];else{if(iillli['data']?.['bizMsg'])console[llIIli(0x165,'n^MK')]('>\x20'+iillli[llIIli(0x17f,'zU]d')]?.[llIIli(0x142,'JY53')]+'}');else{if(iillli[llIIli(0x1c7,'Ylk@')])$[llIIli(0x183,'YtHT')]=!![],console[llIIli(0x165,'n^MK')]('>\x20'+iillli[llIIli(0x203,'29aU')]);else iillli[llIIli(0x1f9,'TB@^')]?console[llIIli(0x108,'f#@X')]('>\x20'+iillli[llIIli(0x16a,'29aU')]):console['log']('❓'+IiiIli+'\x20'+JSON[llIIli(0x1f6,'OZ!8')](iillli));}}break;case I1l1Ii['kVOiY']:if(I1l1Ii['UVXqv'](iillli?.['code'],0x0)&&I1l1Ii['UVXqv'](iillli?.['success'],!![]))$[llIIli(0x19b,'cIzh')]=iillli[llIIli(0x210,'GiK1')];else{if(iillli['data']?.['bizMsg'])console['log']('>\x20'+iillli[llIIli(0x148,'YtHT')]?.[llIIli(0x14b,'Fu()')]);else{if(iillli[llIIli(0x21e,'9D2f')])$[llIIli(0x12d,'c#Aj')]=!![],console[llIIli(0x14a,'o!84')]('>\x20'+iillli[llIIli(0x186,'Fo*V')]);else iillli[llIIli(0x127,'EDO5')]?console[llIIli(0x165,'n^MK')]('>\x20'+iillli[llIIli(0x104,'zzdU')]):console[llIIli(0x202,'sPNe')]('❓'+IiiIli+'\x20'+JSON[llIIli(0x1ac,'IMG(')](iillli));}}break;}}catch(iI1lli){console[llIIli(0x1c0,'ffF7')]('❌\x20未能正确处理\x20'+IiiIli+'\x20请求响应\x20'+(iI1lli['message']||iI1lli));}}async function sendRequest(ll1iI){const lIII1I=iIli11,iI1lll={'nuqHN':lIII1I(0x1e7,'zU]d'),'ETIpp':lIII1I(0x120,'nA2!'),'dmfxu':lIII1I(0x20c,'n^MK'),'dsQsc':lIII1I(0x176,'GiK1'),'lKuug':lIII1I(0x185,'O#GJ'),'mqtKz':lIII1I(0x140,']Nc1'),'DTzwl':lIII1I(0x1ec,'dRnT'),'OGirh':lIII1I(0x13a,'^NRJ'),'XBjQF':lIII1I(0x207,'f#@X'),'fzpBf':'4.7','gBNkf':lIII1I(0x1be,'ffF7'),'uOoYg':lIII1I(0x1d9,'sPNe'),'viPvn':lIII1I(0x216,'UFYF'),'jevmk':lIII1I(0x1fe,'UFYF'),'KulcK':lIII1I(0x195,'o!84'),'egsUR':lIII1I(0x1fb,'IMG('),'ftBGL':function(Iillil,l1lIli){return Iillil<l1lIli;},'NHvjs':function(lIIiiI,II1lil,IIli1l){return lIIiiI(II1lil,IIli1l);}};if($['runEnd'])return;let l1lIll='',I1l1II=null,IIli1I=null,I1i11I=lIII1I(0x17b,'4(2p'),llIliI={},I1l1I1={};switch(ll1iI){case iI1lll['nuqHN']:I1l1I1={'appId':iI1lll['ETIpp'],'functionId':iI1lll['nuqHN'],'appid':iI1lll[lIII1I(0x170,'EDO5')],'clientVersion':common[lIII1I(0x19f,'29aU')](),'client':iI1lll['dsQsc'],'body':{'linkId':linkId,'isJdApp':!![],'inviter':$[lIII1I(0x19d,'UFYF')]},'version':lIII1I(0x1ab,'nA2!'),'ua':$['UA'],'t':!![]},llIliI=await H5st[lIII1I(0x1ae,'dRnT')](I1l1I1),l1lIll=iI1lll[lIII1I(0x1d0,'^NRJ')],I1l1II=llIliI['paramsData'];break;case lIII1I(0x145,'JY53'):I1l1I1={'appId':iI1lll[lIII1I(0x1a4,'YtHT')],'functionId':iI1lll[lIII1I(0x1eb,'^NRJ')],'appid':iI1lll[lIII1I(0x209,'OZ!8')],'clientVersion':common[lIII1I(0x198,'IMG(')](),'client':iI1lll[lIII1I(0x18d,'4(2p')],'body':{'linkId':linkId,'isJdApp':!![],'inviter':''},'version':'4.7','ua':$['UA'],'t':!![]},llIliI=await H5st[lIII1I(0x213,'9$rt')](I1l1I1),l1lIll=iI1lll[lIII1I(0x205,'y9[v')],I1l1II=llIliI[lIII1I(0x161,'f#@X')];break;case iI1lll['OGirh']:I1l1I1={'appId':iI1lll[lIII1I(0x1f2,'iYIb')],'functionId':iI1lll['OGirh'],'appid':lIII1I(0x129,'E*Pl'),'clientVersion':common[lIII1I(0x147,'^NRJ')](),'client':'ios','body':{'linkId':linkId,'inviter':''},'version':iI1lll[lIII1I(0x188,'p93%')],'ua':$['UA'],'t':!![]},llIliI=await H5st[lIII1I(0x204,'JY53')](I1l1I1),l1lIll=iI1lll[lIII1I(0x121,'JY53')],I1l1II=llIliI[lIII1I(0x1d4,'c#Aj')];break;default:console['log']('❌\x20未知请求\x20'+ll1iI);return;}const I1i111={};I1l1II&&(I1l1II={...I1l1II,...I1i111});IIli1I&&(IIli1I={...IIli1I,...I1i111});const ilI1li={'url':l1lIll,'method':I1i11I,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':iI1lll[lIII1I(0x190,'y6^*')],'Accept-Language':iI1lll['uOoYg'],'Connection':iI1lll[lIII1I(0x13e,'IMG(')],'Content-Type':lIII1I(0x206,'dRnT'),'X-Requested-With':lIII1I(0x118,'O#GJ'),'Cookie':cookie+$['strList'],'Referer':lIII1I(0x1ba,'^NRJ'),'X-Referer-Page':iI1lll[lIII1I(0x138,'o!84')],'Origin':iI1lll[lIII1I(0x1d8,'9$rt')],'x-rp-client':iI1lll[lIII1I(0x132,'NGT*')],'User-Agent':$['UA']},'params':IIli1I,'data':I1l1II,'timeout':0x4e20};I1i11I===lIII1I(0x1dd,'iYIb')&&(delete ilI1li[lIII1I(0x1c1,'o!84')],delete ilI1li['headers'][lIII1I(0x1d3,')V#$')]);const IIliI=0x1;let ilI1ll=0x0,Iillii=null,IlI1iI=![];while(iI1lll[lIII1I(0x137,'9$rt')](ilI1ll,IIliI)){ilI1ll>0x0&&await $[lIII1I(0x18a,'NGT*')](0x3e8);const II1lii=await common['request'](ilI1li);if(!II1lii[lIII1I(0x139,'y9[v')]){Iillii=lIII1I(0x102,'ffF7')+ll1iI+lIII1I(0x17a,')Nbw')+II1lii[lIII1I(0x119,'RX[D')],ilI1ll++;continue;}if(!II1lii?.[lIII1I(0x18f,'29aU')]){Iillii='🚫\x20'+ll1iI+'\x20请求失败\x20➜\x20无响应数据',ilI1ll++;continue;}iI1lll[lIII1I(0x1d1,')Nbw')](handleResponse,ll1iI,II1lii[lIII1I(0x155,'p93%')]),IlI1iI=![];break;}ilI1ll>=IIliI&&(console['log'](Iillii),IlI1iI&&($[lIII1I(0x12f,'7IcL')]=!![],$['message']&&$[lIII1I(0x1cb,'^NRJ')]['fix'](Iillii)));}function getAuthorCodeList(lIIii1){const illIlI=iIli11,ll1i1={'xmBeo':illIlI(0x1e8,'YtHT'),'lmeJK':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_2_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.3\x20Mobile/15E148\x20Safari/604.1\x20Edg/87.0.4280.88'};return new Promise(IIli1i=>{const liIiI=illIlI,I1iIi1={'url':''+lIIii1,'timeout':0x2710,'headers':{'User-Agent':ll1i1[liIiI(0x130,'iYIb')]}};$[liIiI(0x21a,'n^MK')](I1iIi1,async(lliil1,IIllI,lliilI)=>{const l1il1I=liIiI;try{if(lliil1){}else lliilI?lliilI=JSON['parse'](lliilI):console['log'](ll1i1[l1il1I(0x103,'YtHT')]);}catch(lili1){$[l1il1I(0x1e1,'Ylk@')](lili1,IIllI),lliilI=null;}finally{IIli1i(lliilI);}});});}function gen_jda_cookie(){const Iiili=iIli11,ll1l1={'aNlSw':function(ii1li,IIll1){return ii1li*IIll1;},'wajkx':function(ll1il,IiiIiI){return ll1il-IiiIiI;},'QxbqC':function(lilii,l1iiI){return lilii*l1iiI;},'fIGTK':function(ll1li,Illl1I){return ll1li*Illl1I;},'yzicx':function(lliiiI,lilil){return lliiiI+lilil;},'EAiHx':function(ll1ll,Illl11){return ll1ll*Illl11;},'sGGaw':Iiili(0x15d,'O#GJ'),'sQyyA':Iiili(0x16f,'E*Pl'),'bMmaw':Iiili(0x14e,'29aU'),'XKtdE':function(ii1lI,I1ilIl){return ii1lI(I1ilIl);}},IllIIi='3';let IllIIl=Math[Iiili(0x166,'zU]d')](ll1l1[Iiili(0x208,'@qM#')](0x8ca6bff,Math['random']()))[Iiili(0x1cd,'cIzh')](),IiiIi1=[...Array(0xc)][Iiili(0x175,')V#$')](()=>Math[Iiili(0x18e,'iYIb')](Math[Iiili(0x13b,'UFYF')]()*0xa))[Iiili(0x117,'7IcL')](''),l1ii1=ll1l1[Iiili(0x12a,'E*Pl')](timestamp(),0x30d40),ii1ll=l1ii1+Math[Iiili(0x135,'A!r(')](ll1l1[Iiili(0x150,'NGT*')](Math[Iiili(0x21d,'29aU')](),0x186a0)),IliI1l=ii1ll+Math[Iiili(0x105,'sPNe')](ll1l1[Iiili(0x167,'dRnT')](Math['random'](),0x2710)),lliiil=ll1l1[Iiili(0x11d,'o!84')](l1ii1,Math[Iiili(0x17c,'n8QY')](ll1l1[Iiili(0x1ea,']01z')](Math[Iiili(0x133,'Fu()')](),0x186a0))),lliiii=[IllIIl,''+l1ii1+IiiIi1,l1ii1[Iiili(0x11e,'RX[D')](),ii1ll['toString'](),IliI1l[Iiili(0x11b,'f#@X')](),IllIIi]['join']('.'),IliI1i=[IllIIl,IiiIi1['slice'](-0x2),''+l1ii1+IiiIi1+'|'+IllIIi,IliI1l[Iiili(0x124,')V#$')]()][Iiili(0x1b1,'dRnT')]('.'),ll1ii=IllIIl,IIli11=[IllIIl,ll1l1[Iiili(0x13f,'Kc38')],Iiili(0x194,'YImR'),ll1l1[Iiili(0x146,'EDO5')],ll1l1['bMmaw'],lliiil[Iiili(0x10f,'(P)i')]()],IllIII=ll1l1[Iiili(0x1a3,'EDO5')](encodeURIComponent,IIli11[Iiili(0x1a9,'GiK1')]('|'));return{'jda':lliiii,'jdb':IliI1i,'jdc':ll1ii,'jdv':IllIII};}function timestamp(){const IilIli=iIli11,I11iII={'zAcOQ':function(I1ilIi,IiiiI){return I1ilIi/IiiiI;}};return Math[IilIli(0x13c,'29aU')](I11iII['zAcOQ'](Date[IilIli(0x1b5,'A!r(')](),0x3e8));}function random(llIlli,llIlll){const li1=iIli11,lliii1={'zLwXM':function(Iiii1,lIIili){return Iiii1+lIIili;},'QBdqY':function(IiiIil,IiiIii){return IiiIil*IiiIii;}};return lliii1[li1(0x20b,'y6^*')](Math[li1(0x12b,'E*Pl')](lliii1[li1(0x131,'@qM#')](Math[li1(0x12c,'OZ!8')](),llIlll-llIlli)),llIlli);}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
