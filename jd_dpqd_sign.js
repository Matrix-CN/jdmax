/*
活动名称：批量店铺签到
活动链接：https://h5.m.jd.com/babelDiy/Zeus/2PAAf74aG3D61qvfKUM5dxUssJQ9/index.html?token=<token>
环境变量：jd_dpqd_tokens // 活动令牌，多个用英文逗号，@，&，换行分割
        jd_dpqd_task_threads // 控制签到并发线程数（正整数），默认1
        jd_dpqd_account_threads // 控制账号并发线程数（正整数），默认1
        jd_dpqd_account_interval // 自定义运行间隔时长（整数，单位毫秒），默认0
        jd_dpqd_max_retry // 签到火爆时的最大重试次数（整数），默认0
        jd_dpqd_prize_notify // 是否推送中奖信息（true/false），默认不推送

此脚本为高并发签到本，需要读取主脚本生成的活动信息缓存，自动过滤无效活动，签到后如有奖品则自动到账


cron:1 1 1 1 *

*/

const $ = new Env('批量店铺签到')
var iｉl='jsjiami.com.v7';function iii1II(_0x46d24a,_0x40388e){const _0x30849c=Iii11l();return iii1II=function(_0x2eaedb,_0x319e5b){_0x2eaedb=_0x2eaedb-0x1cf;let _0x57d8bd=_0x30849c[_0x2eaedb];if(iii1II['EIerbj']===undefined){var _0x1952c7=function(_0x4d4691){const _0x50a771='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x318825='',_0x1f69f4='';for(let _0x57ca24=0x0,_0xf76ed6,_0x431abe,_0x5eeaca=0x0;_0x431abe=_0x4d4691['charAt'](_0x5eeaca++);~_0x431abe&&(_0xf76ed6=_0x57ca24%0x4?_0xf76ed6*0x40+_0x431abe:_0x431abe,_0x57ca24++%0x4)?_0x318825+=String['fromCharCode'](0xff&_0xf76ed6>>(-0x2*_0x57ca24&0x6)):0x0){_0x431abe=_0x50a771['indexOf'](_0x431abe);}for(let _0x1b8e39=0x0,_0x4d17dd=_0x318825['length'];_0x1b8e39<_0x4d17dd;_0x1b8e39++){_0x1f69f4+='%'+('00'+_0x318825['charCodeAt'](_0x1b8e39)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1f69f4);};const _0x10ffce=function(_0x246151,_0x2dfa0a){let _0x5378a5=[],_0x34e5c8=0x0,_0x4a0e1b,_0x2faad8='';_0x246151=_0x1952c7(_0x246151);let _0x54f13b;for(_0x54f13b=0x0;_0x54f13b<0x100;_0x54f13b++){_0x5378a5[_0x54f13b]=_0x54f13b;}for(_0x54f13b=0x0;_0x54f13b<0x100;_0x54f13b++){_0x34e5c8=(_0x34e5c8+_0x5378a5[_0x54f13b]+_0x2dfa0a['charCodeAt'](_0x54f13b%_0x2dfa0a['length']))%0x100,_0x4a0e1b=_0x5378a5[_0x54f13b],_0x5378a5[_0x54f13b]=_0x5378a5[_0x34e5c8],_0x5378a5[_0x34e5c8]=_0x4a0e1b;}_0x54f13b=0x0,_0x34e5c8=0x0;for(let _0x37a304=0x0;_0x37a304<_0x246151['length'];_0x37a304++){_0x54f13b=(_0x54f13b+0x1)%0x100,_0x34e5c8=(_0x34e5c8+_0x5378a5[_0x54f13b])%0x100,_0x4a0e1b=_0x5378a5[_0x54f13b],_0x5378a5[_0x54f13b]=_0x5378a5[_0x34e5c8],_0x5378a5[_0x34e5c8]=_0x4a0e1b,_0x2faad8+=String['fromCharCode'](_0x246151['charCodeAt'](_0x37a304)^_0x5378a5[(_0x5378a5[_0x54f13b]+_0x5378a5[_0x34e5c8])%0x100]);}return _0x2faad8;};iii1II['TAukOq']=_0x10ffce,_0x46d24a=arguments,iii1II['EIerbj']=!![];}const _0x211e5b=_0x30849c[0x0],_0x40f860=_0x2eaedb+_0x211e5b,_0x32be21=_0x46d24a[_0x40f860];return!_0x32be21?(iii1II['PaGtQl']===undefined&&(iii1II['PaGtQl']=!![]),_0x57d8bd=iii1II['TAukOq'](_0x57d8bd,_0x319e5b),_0x46d24a[_0x40f860]=_0x57d8bd):_0x57d8bd=_0x32be21,_0x57d8bd;},iii1II(_0x46d24a,_0x40388e);}const iI1Ill=iii1II;(function(i1lll1,Ii1I1I,l1i1Ii,l1iI1,lliiI1,IiiI1,lilII){return i1lll1=i1lll1>>0x5,IiiI1='hs',lilII='hs',function(IIIiI,iii1i1,IllIll,i1lllI,llIIi1){const l1iII=iii1II;i1lllI='tfi',IiiI1=i1lllI+IiiI1,llIIi1='up',lilII+=llIIi1,IiiI1=IllIll(IiiI1),lilII=IllIll(lilII),IllIll=0x0;const iI1IlI=IIIiI();while(!![]&&--l1iI1+iii1i1){try{i1lllI=-parseInt(l1iII(0x271,'X(p@'))/0x1+-parseInt(l1iII(0x214,'%oMW'))/0x2+parseInt(l1iII(0x2ca,'C$S0'))/0x3*(-parseInt(l1iII(0x1e0,'D6B8'))/0x4)+parseInt(l1iII(0x1f8,'a0Uf'))/0x5+-parseInt(l1iII(0x255,'op[b'))/0x6+parseInt(l1iII(0x2ba,'n0H0'))/0x7*(parseInt(l1iII(0x254,'B&mX'))/0x8)+parseInt(l1iII(0x28d,'kdP$'))/0x9;}catch(l1i1Il){i1lllI=IllIll;}finally{llIIi1=iI1IlI[IiiI1]();if(i1lll1<=l1iI1)IllIll?lliiI1?i1lllI=llIIi1:lliiI1=llIIi1:IllIll=llIIi1;else{if(IllIll==lliiI1['replace'](/[OYpgIJxCdXDhrTRwqPNSf=]/g,'')){if(i1lllI===iii1i1){iI1IlI['un'+IiiI1](llIIi1);break;}iI1IlI[lilII](llIIi1);}}}}}(l1i1Ii,Ii1I1I,function(ill1I1,l1i1II,ili111,Ii1I11,IllIli,ii1Ii,ii1Il){return l1i1II='\x73\x70\x6c\x69\x74',ill1I1=arguments[0x0],ill1I1=ill1I1[l1i1II](''),ili111=`\x72\x65\x76\x65\x72\x73\x65`,ill1I1=ill1I1[ili111]('\x76'),Ii1I11=`\x6a\x6f\x69\x6e`,(0x165d10,ill1I1[Ii1I11](''));});}(0x1860,0x7361d,Iii11l,0xc5),Iii11l)&&(iｉl=iI1Ill(0x215,'&F)W'));const jdCookie=require('./jdCookie'),notify=require(iI1Ill(0x2f4,'&F)W')),common=require('./utils/Rebels_jdCommon'),{H5st,jsTk}=require(iI1Ill(0x312,'4QZf'));console[iI1Ill(0x241,'X(p@')](''),console[iI1Ill(0x1f7,'hGS5')]('=========='+$[iI1Ill(0x2c7,'SUjm')]+iI1Ill(0x289,'%oMW')),console[iI1Ill(0x274,'op[b')](iI1Ill(0x26d,'65)x')),console[iI1Ill(0x208,'axZB')](iI1Ill(0x2a4,'n0H0')),console[iI1Ill(0x29e,')%]N')](iI1Ill(0x2b9,'VKUi')),console['log']('jd_dpqd_account_interval\x20//\x20自定义运行间隔时长'),console[iI1Ill(0x2e8,'a0Uf')]('=========='+$[iI1Ill(0x24c,'B4zI')]+iI1Ill(0x233,'e0$n')),console[iI1Ill(0x2aa,'L^]Z')]('');let tokensList=(process[iI1Ill(0x21a,'J3M(')]['jd_dpqd_tokens']||'')[iI1Ill(0x2b8,'65)x')](/[,@&|\n]+/g)['filter'](Boolean),taskThreads=process[iI1Ill(0x1f5,'X(p@')]['jd_dpqd_task_threads']||'1',accountThreads=process['env']['jd_dpqd_account_threads']||'1';const runInterval=process[iI1Ill(0x2dc,'op[b')]['jd_dpqd_account_interval']||'';let signHotMaxRetryTimes=process[iI1Ill(0x280,'e0$n')]['jd_dpqd_max_retry']||'0';const isNotify=process[iI1Ill(0x2ce,'460&')][iI1Ill(0x21f,'Iu1o')]===iI1Ill(0x258,'MgrQ');let TokensMap=new Map();function Iii11l(){const IiiIl=(function(){return[...[iｉl,'pDRjwqsPJjpfiOPaPxmCIiXgY.rcfohmNTD.Sdv7==','W6tcKteMjG','hCkGWRxdGX8RjWFcSmkjW7Kle8kHhSkGa8omvmoKxgafoepcU28DgSkRW6mUACkrW4anW4JcJCkfCW','W6lcLIxcV8oe','fvldGCoTW4q','WRXvcZ8','WP/cK8okWOxcSHRdRLa','dmk7WQddNWe','WQrCWOdcOgW','W5FdPJnYW6uJxHS','r8k0iaddLW','dCoVsSkNW4u','CUITQoAZTowqQEw4UCoe','woEVSowiGoAjSowkRU+9Hq','lSoOrG','4P+dW7ROH4NMNRlOVytOOPxPGiJLIBdKU4lPLl/OR5j/','WRenW4T1','WRLUW5qXWOeCW7RdSc0','k8kZlbC3','5O+k56Ec57Q55P2EBLNdHez8WRhdJJ0FWRi','W7JcObWenLpcKXWLWRpdOxddM3qs','CSoGuW1FlxhdHW','ySk+WPNcHW','W7RcRSk1WRpcRa','4PIRW6NOROZLHklLR6/KUBxLVlROP7hNM4tNJB/LOjBLJ6/PHB3LKjZLH6VOVOFOO7hOHPxMNlRVVjq','W5BcNai','CCk+WP4','W4ddSsy','WOBdIb/cLqu','5P6c5yM75zQ757UF5B2n','hrlcPc5Q','awtdM8op','dmkMrgKv','WR9YW5W','rConsa','WQVdQ2D7aW','W6tcHZeemq','BSo2vGzR','i13dISobta','EmoHvaq','WQ/dP8kGW5BdGW','W5tdOIK7WOe','eMZdICowvuSMyG','W70ZsG','W6hcU8k+W7S','W4G0jwpdQ8o0wmkJ','WOjQW6WYWRy','WOjhW70lWQC','BCo5zW','aMpdOmoMW4q','h2dcJmk3zq','W7Gzx1fp','W6VcUmo8iwdcQmoyraHLWQW','rrxdImoKedldRHCOkCkNWQmr','W5H2W4fsrmoD','W7lIN77cJ+kCLCkl','WQyqW5P1','dMdcLCkJzW','W4FdJW0DWPC','WR3dLHVdUmo9','hCkKz14w','oSoYqmkqW7O','WRNdRMRdRCoU','Amk5jt7dUSkl','h8oRra','WQFdKcxdG8oq','WPRcICokWO/cUGe','cCoDumk7W6q','eH4/WRS','W5pdVxWzda','pSofuHvZ','W73cV8kIW6VdSCkQoW','nSo+W4lcHq','W78ZwG','E8kJoda','dCoddSkxW6XdbLT2W5q','bSoqW4/cQKldMq','WQH/pJBdPmkGWQLCbCoNktDgkf/dOSkHloA1S+wlTMNcJ++9IUwKG+s4PUExR+IjUoAwUEMbPUwmVEwlJowiTa','C8kJWOpcGe3cKdX5WOPD','yCoYrKjJ','W4S5WRldQ8ossLNcJa','W6SLWO5MW4yvWR7cOxeXmCoF','z1vxW6tcSG','WOlNRztLIA3LPAxOT7hVVyK','gKRcMq','WO/cK8ouWOm','yColyG56','WO3NR6BLIBJMIAFLIBa','WPFdOhu','WQtdGSkkW6RdSW','W7tcVGpcG8oi','vLjR','WQTCfJGV','W5Kuf11Vh1NdSqHe','WO0PW5SwycVcK8oScq','W5FdKv82','F8kwha','W7JcU8k6W6RdGmkWiIu','WPm8W5K','WOhINj994P2AWQdNRk/LIkFLPy7OT7tcMq','W4BdVtee','WPZcVmkJvgO','ASkmnxe6cG','WQZcNmk3F38','j8o/smkD','5y266yEL6k6P5PMAW6L8q8kemshdQgVdRCkC','W6aar2TPW63dM8oVwdf1WPm','F8kEWPJcKNq'],...(function(){return[...['W5uWk3BdPa','W7/cRmo2WRdcU8kNirNcO8kQjs4VDW','oUkDPeROR7BMSjhLPzxOT5ZVVBpMLQhLKyhLUAFMLBdMJyZVVOBWRBQ9','5RE15yI95PsV5PEi','WR3dVmkOW67dImo/FutcJ8kkfZS1wsi','W6L5WQ3dLJBdNMBcU8kJW5q','WOzDDmorAwC','Amo4DmoWW41ok8oFoWfzgYRcKSkrW6HinKRdRG','aSoJW7pcUKy','W6u2qeL4','WR3cSCoBWPpcNW','pSkWcJ0U','W5bpWOddRWy','o8oXW5xcImoyWOazmq','dmosdSkbW55zpvDrW4xcKCov','xSoowKX7','hZxcTJTs','xUEVIEwjN+wNLoI2VE+8Ua','W7BcIcy','WPHkadxdGW','WQFdU8k8W6xdUCoK','WPLtB8o4Fgjh','WQtcU8knEuK','WOVdRMddO8ovlmoGhCozfG','W7bPWPpdGdldNfxcJCkJW51qWRCMgbFcNrWWW6ZcNSorC8k3iEAmT+wlU+EUVUwlTow4JowoVo++Q+M5IUITRSop','WR/dI8k4Fde','WQBdKd7dSSoc','WQHvds0+','amovEmkVW5q','W5JcGLNdUKdcL1G','fmoHvW','W60bWR7dLSoK','5yEHB+wmVpcQJzu','zmoOW4m6WRq','ymkZlIJcVSkncmoPWPfA','W5hdNvm3cWSpWOrihhCq','5lI26lgl8yYsKG','W7OJvgVcO8oPWRLIhSofocu','WROmWP/cQaO','W5LIWQldKcFdG0xdV8kdW4vtWRK','e+A0VUwiNUwMGoEdIoEkSa','W45KW5TpD8oAFaW','WOtdGvv0','vEkFQmoI4PYBhW','WRfRdtVdOa','xmomy1fEW7xdHmkeemkjDSo9WOhdRtZcICkIodjJqSokW7tcJ8oszG/MJ7RLIkBOT5tLJllLUAxLJApVVlpPUPZORORdGa','WQK9W7tdRJBdIf7cP8kC','AmoVxqqhjMBdNrpdVmoc','WPmUW44','sCkSouGz','WOZdIr8','WRpdUXZdHCoNcmoUW6S','W5S9WQ/dL8kZuea','W5a3WRW','W47dP28bmKPeASkaoq','cg3dSmoVW4O','dmkmzgSa','WQPVfsldP8oRW6iSgCk9Bd8gmrVdO8oTyYvX','foETS+wiHowMHEI3RE+9Ka','B8o3BCoW','WRm4W7OWxW','W6eUrePNAupdSvi','W6meW5RcHK9HhqRdIq','CCoBxXLY','WO9WF8odua','WQ3dNWFdKmo+','uwnc','WPJdIr8','W77cHJxcPG','5BEg6l6Z5yIe56+k5yU45lMs6zMe','WP1zC8ocswzpFW','ymo7W4qpWPlcQba','WP7dVb7dTCoH','W5Klv0z1','W7JcRa8','vUkEUCoE4P6Aca','DSkDbgyNda','W5FdVgCD','4PMKWRROHP/LRkVKU7ROVRhOO4/PLBRPMORML77PLPdORPxNVAdPLARORlW','WPHhW4OnWOm','e0VcIa','WQfjWOpcK2HcdXFdQmoW','WQSbWQtcIqpdMmkH','z8oIW4naWPpdQGmDbmo5rYm','Amo9W50','WOJcN8on','xZxcHG','5yE/57U65y+E8lIvOq','WPbJFMJdJCoaEmkKWOK','ESkUgZtdPW','WPhdUa3cLr8','5lQ+5PsR5BsZ56+y','jmkocG','WPHyWOpcPhC','k8osjCkjW7i','WQZcMCkTqx0b','BCoZBSoYW4Th','ySoiqsLc','WP3dPvpdGCol','W47dO2iAmG','wSohw3bCW7y','WPf7WRVcGhO','W5jllYFcSq','WOyGW59IW5S','w1VcTYnwW6hcNGdcT17cO8kUoKnjcSkiWO0BzcpdHvv1WOZdMCkD','WQldSmkHW6FdV8o4','W5r2W5u','WPLiDSoFAq','WOVdUMhdQG'],...(function(){return['WQRdV8kHW7NdJW','CSkDc2u2fSkk','W5NdNLW3oq','fK3dN8oeW44','butdGSogW44','W5e9WQJdRmoNrfe','W4FdTwaxmG','WO1DDmoJxa','WPpdH1X0','4P6YFEAEG+IcGUATREEGOUwNVUEsJfa','WPa8W4qA','W5pdVhK','W4ZcNY0Goa','WR5sWOu','xCoJuf5j','WOK8W4alwIxcL8oV','rEIVUUAZOUwrR+w6Lqi','W6JcSmkRW5ddVa','erO/WPDMWRZcSmooWOtdVq','WQ7dP8kptJe','5RAH5yMp5BgB5P+T5B6H5AA8','EmoEACo7W5i','jmkYCwOdWO1s','dSoCW7pcIvW','j03cJmohW47cJhGuW7RdOG','W7yBcIOYWRxdVSkrxb5BWRm+WQHjWRa','wgjt','W4ldIgG9oq','5BUJ6zc056sU5yQG8ksFLE+5IW','a8oOW6hcICoQ','d23cL8k4rq','u8kOefGH','BmoHW4ahWP/cQqbxsCo1rwaxW5u','W7aTewldMq','WQBcImkSBge','WRWsW48NrW','kSkRAq','WOldUGhcRrO','W6ldU34jba','W7FcPrtcSCoe','W5ldPIK','W6JcPHujiv3cJbS','c8oesCkfW4i','WPnSDZNcPSoeASkeWPu6oa','W6fsWPDAW5/cG8kolbi','hSoCW4ZcQa','W5ypWP7dTCo+','ghxdP8oNW60','W67cUCkNW7FdOSkWoZKnqG','W5FdNuONyHipWObYcW','jGtcGtP4','W7j5WRJdLdhcLX7dVCk/WOKnWRfxbHVdGrO+W6xdGSktpCo6zmo8WONcQCk9vtFdGSoNWRNdKCkCW77cRSo7eSovkutdNq7dGHddHSkzagtdPtT6F8kLmWXTW6JdUSk4rSk7W7ZcVsfGBCkvW6uUW73cUq','W6PpW7PVdSo3qtJdQ3Ld','WP/dSmkzW6/dUq','W4zphYxcVW','W53cOImzda','b8kAdW','WOJcJSoyWPtcQrZdL03dVdy','WQuYW65QW5K','oSoFk8k1W7y','WR3cQSotWOxcKa','esBcGtjP','W53cNCkNW5tdLG','DSk2cvyu','WRzZW40','W5xcSW7cQSoP','j8kOyG','FmoqxgHDWQ4bWP3dPmkGi2u','WRf+fq','jmkeaZGqW7y','n8oJkCkkW5K','W6BcTmkNW7VdPSkAkI4Wq08Qo8kcAb0IWPLMW48','WQXrdcO','4PQulEIhNUwSRUs6GEI+IoIHMoMvJUMzLUAvMUMvMoISQUE8HEMuJoISIa','W4NdUtWw','gCkmWQddTJ0','qSoXESofW5K','W6ZcTCk3W7S','WQNdR8kMW7dcP8kWDu3cJmkfaGG5e3zevG','dCk0WQddQGm','WPiYW44','W5hdVgK','WO/dTahcKZG','WPFcLCoE','c8oSzc1D','W7WVsG','hCohW67cPN0','FmkviqldKq','z8k5la','WR/dPXlcKdG','WRTZbW','WP7dMa3dUuK','WQFdTrhdLa','bmoAWOZcRLNdG8o5','WO4OW5Ox','WPOEzwhdPNuOW6HAvSkzeW','hWFcQd5EW6dcHahcHLtcRmoLiaC','W6lcJWtcRSoI','q2XDW4a','dGysWQjj','W6RdJH49WQi','W5JdVxG','gmoHsSkTW4q','W6NdNvmwjG','CCoTAa','W6ZdSbaqWRG','WQ7dVIRdLCodemoNW5fUESkguwSSWR1GW53dMmkWlW','W6y9rerwteFdPW'];}())];}())];}());Iii11l=function(){return IiiIl;};return Iii11l();};const signStatusMessages={0x1805c007:iI1Ill(0x2e7,'h]#]'),0x181688ea:iI1Ill(0x2d1,'460&'),0x1843da61:iI1Ill(0x30d,')%]N'),0x1843da62:'活动已经结束',0x184253c7:'账号无效',0x192:iI1Ill(0x28f,'kdP$'),'-1':iI1Ill(0x23d,'B4zI')},invalidTokensMap=new Map(),CacheFile=__dirname+'/rs_dpqd_tokens.json',cookiesArr=Object[iI1Ill(0x284,'MYen')](jdCookie)[iI1Ill(0x282,'MgFE')](i1ill=>jdCookie[i1ill])[iI1Ill(0x2eb,'GBMn')](I1l11l=>I1l11l);!cookiesArr[0x0]&&($[iI1Ill(0x20a,'j)J]')]($[iI1Ill(0x303,'MgFE')],'【提示】请先获取Cookie'),process[iI1Ill(0x288,'pq!w')](0x1));!(async()=>{const lilI1=iI1Ill,lilIIi={'wpQMN':function(i1l1Il,llIli){return i1l1Il>llIli;},'xuayl':function(i1i11l,i1i11i){return i1i11l===i1i11i;},'jWEjx':function(II11l1,Iil1lI){return II11l1(Iil1lI);},'iVjyk':function(IiiliI,iii1iI){return IiiliI!==iii1iI;},'djnyD':lilI1(0x216,')%]N'),'xqdxe':function(llIll,il1iII,iilli,IlllIl,II11lI,lI1IIi){return llIll(il1iII,iilli,IlllIl,II11lI,lI1IIi);},'eHeuM':lilI1(0x311,'H[Jq'),'rKDcg':function(I1l11I,Ilil1l){return I1l11I<=Ilil1l;},'cKpke':lilI1(0x238,'dOo6'),'ACLZI':'vedLP','wPAzr':lilI1(0x21b,'pq!w'),'mBaPP':function(iIIiii,iilll){return iIIiii>=iilll;},'TBprp':function(il1iI1,IlllIi){return il1iI1===IlllIi;},'GVVJM':lilI1(0x1d7,'GBMn'),'xEQXh':lilI1(0x1fe,'460&'),'rgGYe':function(iIIiil,i1l1Ii){return iIIiil===i1l1Ii;},'CgzPf':'tuOpC','yoNvD':function(I1iIIi,I1iIIl){return I1iIIi>I1iIIl;},'VLbar':function(lI1IIl,i1ilI){return lI1IIl===i1ilI;},'jUoxX':function(iii1lI,i1ilI1){return iii1lI>i1ilI1;},'yzaLn':lilI1(0x251,'H[Jq')};try{notify[lilI1(0x25f,'TpkT')]({'title':$[lilI1(0x23f,'H[Jq')]});if(tokensList[lilI1(0x26c,'nH!2')]>0x0)tokensList=[...new Set(tokensList['filter'](Iil1li=>Iil1li!==''))];if(lilIIi['rKDcg'](tokensList[lilI1(0x1fa,'a0Uf')],0x0)){console[lilI1(0x20d,'TpkT')](lilIIi[lilI1(0x2a5,'B&mX')]);return;}const Iiilii=require('fs');if(Iiilii[lilI1(0x26e,'NTp0')](CacheFile)){if(lilIIi['iVjyk']('WSicb',lilIIi[lilI1(0x1db,'mj]I')])){const Iiilil=Iiilii[lilI1(0x2af,'mj]I')](CacheFile,lilI1(0x237,'B4zI')),Iil1ll=JSON[lilI1(0x2f2,'%oMW')](Iiilil);for(const iillI in Iil1ll){TokensMap[lilI1(0x2e1,'axZB')](iillI,Iil1ll[iillI]);}}else return;}$[lilI1(0x24a,'Z7jY')]=null;if(runInterval)try{if(lilIIi[lilI1(0x25d,'pq!w')](lilIIi[lilI1(0x1ef,'MgrQ')],lilI1(0x2d4,'Iu1o'))){const IIliIi=lilIIi[lilI1(0x1e3,'O(ZK')](parseInt,runInterval);lilIIi[lilI1(0x200,'h]#]')](IIliIi,0x0)&&($[lilI1(0x270,'O(ZK')]=IIliIi);}else l1il1I=!![];}catch{lilIIi[lilI1(0x2f3,'MgrQ')](lilIIi[lilI1(0x219,'MYen')],lilIIi[lilI1(0x305,'dOo6')])?console[lilI1(0x22e,'pq!w')](lilIIi['xEQXh']):(I1iIli=lI1Ill['venderId'],lI1Ili=IliilI['activityId']);}try{const I1l111=lilIIi['jWEjx'](parseInt,signHotMaxRetryTimes);signHotMaxRetryTimes=I1l111>0x0?I1l111:0x0;}catch{if(lilIIi[lilI1(0x30c,'B&mX')](lilI1(0x2ee,'YQuH'),lilIIi[lilI1(0x201,'SUjm')])){const I1iIII=Ii1iII(l1i11I);lilIIi[lilI1(0x1e4,'H[Jq')](I1iIII,0x0)&&I1iIII!==0x1&&(Ii1iI1=I1iIII);}else signHotMaxRetryTimes=0x3;}try{const liiI11=lilIIi['jWEjx'](parseInt,taskThreads);lilIIi['yoNvD'](liiI11,0x0)&&liiI11!==0x1&&(lilIIi[lilI1(0x285,'GBMn')]('typeH','typeH')?taskThreads=liiI11:IIII11=i1illi);}catch{taskThreads=0x1;}try{const IIii1i=lilIIi[lilI1(0x279,'kdP$')](parseInt,accountThreads);lilIIi[lilI1(0x2cb,'PjP^')](IIii1i,0x0)&&lilIIi['iVjyk'](IIii1i,0x1)&&(accountThreads=IIii1i);}catch{accountThreads=0x1;}await common[lilI1(0x1de,'dOo6')](accountThreads,cookiesArr,async(i1ili,Iiill1)=>{const i1llll=lilI1,I1iII1={'oNJnD':function(lilII1,iill1){const IIIi1=iii1II;return lilIIi[IIIi1(0x227,'h]#]')](lilII1,iill1);},'UeJlj':function(iii1l1,IIliIl){const i1llli=iii1II;return lilIIi[i1llli(0x25a,'MYen')](iii1l1,IIliIl);},'vQgbJ':function(II11ll){return II11ll();}};if(lilIIi[i1llll(0x1da,'crp[')]('xhEiC',lilIIi[i1llll(0x2f9,'kdP$')]))I1iII1[i1llll(0x244,'dOo6')](I1lIl1,0x0)&&(I1iII1[i1llll(0x2ea,'ZwC]')](i1i1Ii,lllii),I1iII1[i1llll(0x297,'a0Uf')](iI11Ii));else{await lilIIi[i1llll(0x223,')%]N')](concMain,taskThreads,tokensList,i1ili,Iiill1,Main);if($[i1llll(0x308,'MgFE')])await $[i1llll(0x217,'460&')]($[i1llll(0x281,'B4zI')]);}});if(isNotify&&notify[lilI1(0x30b,'wawy')]()){if(lilIIi[lilI1(0x249,'MYen')]!==lilIIi[lilI1(0x204,'h]#]')]){lI11I1[lilI1(0x24b,'j)J]')](''+l1il11+IiI1+lilI1(0x2b7,'&F)W')+liI[lilI1(0x1e2,'nH!2')](lilIIi[lilI1(0x2cc,'PfkZ')],illIli['now']())+lilI1(0x273,'%oMW')+l11i1l[lilI1(0x2bc,'MgFE')]+'）');if(!lIII11[IiilI['code']])ii1I11=!![];}else await notify[lilI1(0x213,'MgFE')]();}}catch(lI1II1){console[lilI1(0x306,'C$S0')](lilI1(0x22f,'B4zI')+lI1II1);}})()['catch'](i1ilII=>$[iI1Ill(0x2f0,'VKUi')](i1ilII))[iI1Ill(0x2d3,'zo1$')](()=>$['done']());async function Main(iIIii1,IllIi1){const iI1Ili=iI1Ill,lilIII={'STtNT':'⚠\x20请先定义必要的环境变量后再运行脚本！','zTfAn':function(i1ilIi){return i1ilIi();},'GaAEz':iI1Ili(0x2b3,'n0H0'),'jAtlm':function(lill1l,l1l1i1){return lill1l!==l1l1i1;},'iEraM':iI1Ili(0x1ed,'VKUi'),'uxfgA':function(i1iiI,i1ilIl){return i1iiI===i1ilIl;},'yFqHh':function(llI11I,Il1i11){return llI11I===Il1i11;},'zfndt':function(iii1li,Iil1i1){return iii1li===Iil1i1;},'pCFoT':function(IIii11,iliIl1){return IIii11===iliIl1;},'dXjGI':'优惠券🗑️','yqhsz':function(Ii1il1,iii1ll){return Ii1il1>iii1ll;},'cxTRJ':iI1Ili(0x287,'GBMn'),'xlsMq':iI1Ili(0x29f,'65)x'),'yHinm':'HH:mm:ss.S','TKyDI':iI1Ili(0x296,'axZB'),'QwWmG':function(IIliI1,il1lI){return IIliI1===il1lI;},'MgBgI':function(IliIIl,I1il1l){return IliIIl!==I1il1l;},'sbTMl':'QHZtf','MeSOQ':iI1Ili(0x22b,'pq!w'),'Vcbry':function(lI1l1l,IIliII){return lI1l1l>=IIliII;},'aroVH':iI1Ili(0x2da,'Iu1o'),'nfBfk':function(iiliI,Ill11I){return iiliI===Ill11I;},'nYBDi':iI1Ili(0x1f2,'&F)W'),'krwLL':iI1Ili(0x1eb,'%oMW'),'KZqRr':iI1Ili(0x21d,'VKUi'),'BaxoV':'signCollectGift','apZnt':iI1Ili(0x222,'h]#]'),'rODBM':iI1Ili(0x1fc,'B4zI'),'tjmyz':function(I1il1i,IliIIi){return I1il1i(IliIIi);},'JBLKD':function(lI1l1i,i1iil){return lI1l1i(i1iil);},'mszie':'https://api.m.jd.com/api','gjxNh':function(llI11l,I1llIl){return llI11l!==I1llIl;},'rPuUx':iI1Ili(0x272,'460&'),'OTOmH':iI1Ili(0x203,'kdP$'),'mBUve':'zh-CN,zh-Hans;q=0.9','BRYFB':iI1Ili(0x2ae,'TpkT'),'erZkT':iI1Ili(0x1e6,'mj]I'),'vabAp':iI1Ili(0x2df,'zo1$'),'ReJBd':iI1Ili(0x212,'nH!2'),'LuikI':iI1Ili(0x2bb,'PjP^'),'wCjZB':iI1Ili(0x21c,'mj]I'),'zERoP':function(i1iii,I1llIi){return i1iii>=I1llIi;},'bziTJ':'fpLQW','hVRwp':function(IIii1I,llI11i){return IIii1I===llI11i;},'diRDj':iI1Ili(0x2bd,'e0$n'),'cJPrc':iI1Ili(0x1df,'pq!w'),'lWAUN':function(i1iIi1,l1l1il){return i1iIi1!==l1l1il;},'HWzvw':function(I11i1I,iliIi1){return I11i1I||iliIi1;},'LEVjl':function(l1l1ii,Il1i1I){return l1l1ii===Il1i1I;},'BOfXI':iI1Ili(0x26f,'VKUi'),'ghFEi':function(Ii1iii,iIIilI){return Ii1iii/ iIIilI;},'QZFTV':iI1Ili(0x221,'dOo6')},{title:Ii1ilI,UA:II11i1,cookie:iliIil,message:iliIii,jsToken:lill1i}=IllIi1;if(invalidTokensMap[iI1Ili(0x260,'L^]Z')](iIIii1))return;let il1li='',iIIill='';const iilii=TokensMap[iI1Ili(0x23a,'NTp0')](iIIii1);if(iilii)il1li=iilii[iI1Ili(0x229,'rN2a')],iIIill=iilii[iI1Ili(0x1e5,'B4zI')];else{if(lilIII[iI1Ili(0x1d2,'ZVGc')](iI1Ili(0x218,'wawy'),lilIII[iI1Ili(0x2ad,'zo1$')]))IiIi[iI1Ili(0x1f7,'hGS5')](iI1Ili(0x302,'MgFE')+iI1ll1+iI1Ili(0x22c,'ZVGc')+(IlI1Il['message']||l1il1l));else try{if(iIIii1[iI1Ili(0x235,'PjP^')](':')&&lilIII['hVRwp'](iIIii1[iI1Ili(0x2f7,'PfkZ')](':')[iI1Ili(0x292,'PfkZ')],0x3)){if(lilIII[iI1Ili(0x294,'nH!2')](lilIII[iI1Ili(0x310,'nH!2')],lilIII[iI1Ili(0x261,'Iu1o')])){IiilI1[iI1Ili(0x206,'J3M(')](lilIII['STtNT']);return;}else{const Ilil1i=iIIii1[iI1Ili(0x2ef,'J3M(')](':');if(!Ilil1i[0x0]||!Ilil1i[0x1]||!Ilil1i[0x2])return;iIIii1=Ilil1i[0x0];if(lilIII['lWAUN'](iIIii1['length'],0x20)||!/^[A-Z0-9]*$/['test'](iIIii1))return;iIIill=Ilil1i[0x1],il1li=Ilil1i[0x2],Ilil1i[0x2][iI1Ili(0x2dd,'C$S0')](lilIII[iI1Ili(0x2cd,'Iu1o')])&&lilIII['yFqHh'](Ilil1i[0x2]['length'],0x8)&&!Ilil1i[0x1][iI1Ili(0x291,'n0H0')](lilIII[iI1Ili(0x252,'op[b')])&&(iIIill=Ilil1i[0x2],il1li=Ilil1i[0x1]),TokensMap[iI1Ili(0x2d6,'dOo6')](iIIii1,{'index':null,'venderId':il1li,'shopName':'','activityId':iIIill,'startTime':'','endTime':'','isValid':!![],'rules':[],'minLevel':null,'maxLevel':null});}}}catch(iili1){return;}}if(lilIII[iI1Ili(0x2d5,'j)J]')](!il1li,!iIIill)){if(lilIII[iI1Ili(0x243,'FU17')]('zIdAX',lilIII[iI1Ili(0x1d8,'MgFE')]))iIII1i(iil1i1),lilIII[iI1Ili(0x2e6,'crp[')](il1i11);else return;}const Ill11i=Math['floor'](lilIII[iI1Ili(0x2c3,'H[Jq')](Date[iI1Ili(0x269,'j)J]')](),0x3e8))+iI1Ili(0x2e2,'H[Jq');if(invalidTokensMap[iI1Ili(0x23a,'NTp0')](iIIii1))return;let iilil=![];await lilIII[iI1Ili(0x28c,'D6B8')](il1ll,iI1Ili(0x234,'dOo6'));if($[iI1Ili(0x2bf,'Iu1o')])await $['wait']($[iI1Ili(0x2b5,'oQVP')]);if(iilil&&lilIII['yqhsz'](signHotMaxRetryTimes,0x0)){let Iil1iI=0x0;while(Iil1iI<signHotMaxRetryTimes){if(lilIII[iI1Ili(0x24e,'X(p@')](iI1Ili(0x2f1,'C$S0'),lilIII[iI1Ili(0x24f,'X(p@')]))delete l1llIl[iI1Ili(0x2d0,')%]N')],delete ii1I1l[iI1Ili(0x2fa,'e0$n')][lilIII[iI1Ili(0x240,'hGS5')]];else{if(invalidTokensMap[iI1Ili(0x2be,'crp[')](iIIii1))return;await il1ll(iI1Ili(0x290,'kdP$'));if($[iI1Ili(0x24a,'Z7jY')])await $['wait']($[iI1Ili(0x2d2,'PfkZ')]);if(!iilil)break;Iil1iI++;}}}function Ill11l(iIIil1,IlllII){const llIIiI=iI1Ili,I1il1I={'smvVt':function(II111,lI1l1I){return II111(lI1l1I);}};try{switch(iIIil1){case'signCollectGift':if(lilIII[llIIiI(0x2ed,'PjP^')](IlllII['code'],0xc8)&&lilIII[llIIiI(0x2fb,'mj]I')](IlllII['success'],!![])){const lill11=[];if(IlllII[llIIiI(0x268,'ZVGc')]&&IlllII[llIIiI(0x225,'4QZf')][llIIiI(0x2d8,'e0$n')]>0x0)for(const liI1i1 of IlllII[llIIiI(0x264,'wawy')]){if(lilIII['pCFoT']('VYfpq',llIIiI(0x232,'a0Uf'))){if(II1liI[llIIiI(0x24d,'D6B8')](':')&&IlI1i1['split'](':')['length']===0x3){const I1llII=iillli['split'](':');if(!I1llII[0x0]||!I1llII[0x1]||!I1llII[0x2])return;I1l1Ii=I1llII[0x0];if(lilIII[llIIiI(0x2fd,'H[Jq')](I1i11i[llIIiI(0x2f5,'kdP$')],0x20)||!/^[A-Z0-9]*$/[llIIiI(0x1fd,'4QZf')](I1i11l))return;llIlii=I1llII[0x1],llIlil=I1llII[0x2],I1llII[0x2][llIIiI(0x2c2,'J3M(')](llIIiI(0x239,'FU17'))&&I1llII[0x2]['length']===0x8&&!I1llII[0x1]['startsWith'](lilIII[llIIiI(0x28b,'NTp0')])&&(IlI1ii=I1llII[0x2],lIIiii=I1llII[0x1]),IiiIll[llIIiI(0x1dd,'rN2a')](IIlii,{'index':null,'venderId':IlI1il,'shopName':'','activityId':IilliI,'startTime':'','endTime':'','isValid':!![],'rules':[],'minLevel':null,'maxLevel':null});}}else{const Iil1il=liI1i1?.[llIIiI(0x2c9,'j)J]')]||[];for(const I11i1i of Iil1il){const l1l1iI=I11i1i?.['type'],I1llI1=I11i1i?.[llIIiI(0x226,'axZB')];let I11i1l='';switch(l1l1iI){case 0x1:I11i1l=lilIII[llIIiI(0x207,'crp[')];break;case 0x4:I11i1l=I1llI1+llIIiI(0x2b0,'n0H0');break;case 0x6:I11i1l=I1llI1+llIIiI(0x1d1,'h]#]');break;case 0x9:console[llIIiI(0x205,'MgFE')](I11i1i),I11i1l=(I11i1i?.[llIIiI(0x293,'SUjm')][0x0]?.[llIIiI(0x2a1,'PfkZ')]||'未知')+'🎁';break;case 0xa:I11i1l=I1llI1+llIIiI(0x2ac,'%oMW');break;case 0xe:I11i1l=I1llI1/0x64+llIIiI(0x2e3,'O(ZK');break;default:I11i1l='未知奖品（'+l1l1iI+'）';}lill11[llIIiI(0x26a,'TpkT')](I11i1l);}}}if(lilIII['yqhsz'](lill11[llIIiI(0x2ec,'SUjm')],0x0)){if(lilIII['cxTRJ']===lilIII['xlsMq']){const Il1i1i=Iillii['split'](':');if(!Il1i1i[0x0]||!Il1i1i[0x1]||!Il1i1i[0x2])return;IlI1iI=Il1i1i[0x0];if(Iillil[llIIiI(0x1fa,'a0Uf')]!==0x20||!/^[A-Z0-9]*$/[llIIiI(0x236,'NTp0')](l1lIli))return;lIIiiI=Il1i1i[0x1],II1lil=Il1i1i[0x2],Il1i1i[0x2][llIIiI(0x26b,'ZwC]')](lilIII[llIIiI(0x253,'j)J]')])&&lilIII[llIIiI(0x245,'PjP^')](Il1i1i[0x2][llIIiI(0x2ec,'SUjm')],0x8)&&!Il1i1i[0x1][llIIiI(0x1ee,'axZB')](lilIII['iEraM'])&&(lliil1=Il1i1i[0x2],IIllI=Il1i1i[0x1]),lIIii1[llIIiI(0x2cf,'crp[')](ll1i1,{'index':null,'venderId':IIli1i,'shopName':'','activityId':I1iIi1,'startTime':'','endTime':'','isValid':!![],'rules':[],'minLevel':null,'maxLevel':null});}else{console[llIIiI(0x278,'YQuH')](''+Ii1ilI+iIIii1+'\x20➜\x20✅\x20'+$['time'](lilIII[llIIiI(0x1d3,'op[b')],Date['now']())+llIIiI(0x22d,'L^]Z')+lill11[llIIiI(0x2d9,'J3M(')]('，')+'）');for(const iIIili of lill11){if(lilIII['pCFoT'](lilIII[llIIiI(0x20e,'crp[')],llIIiI(0x266,'L^]Z')))iliIii[llIIiI(0x2a0,'kdP$')](iIIili);else{const Ilil1I=I1il1I['smvVt'](iliIII,iIIl1i);I1lllI=Ilil1I>0x0?Ilil1I:0x0;}}}}else console[llIIiI(0x2e8,'a0Uf')](''+Ii1ilI+iIIii1+llIIiI(0x257,'MgrQ')+$['time'](lilIII['yHinm'],Date['now']())+llIIiI(0x277,'MYen'));iilil=![];}else{if(lilIII['jAtlm'](IlllII[llIIiI(0x211,'Iu1o')],0xc8)){const iliIiI=signStatusMessages[IlllII[llIIiI(0x202,'B4zI')]]||IlllII['code']+llIIiI(0x2b4,'H[Jq');[0x1843da61,0x1843da62,0x192][llIIiI(0x299,'ZVGc')](IlllII['code'])&&invalidTokensMap['set'](iIIii1,!![]),console[llIIiI(0x1cf,'460&')](''+Ii1ilI+iIIii1+'\x20➜\x20❌\x20'+$[llIIiI(0x27f,'mj]I')](lilIII[llIIiI(0x2fc,'H[Jq')],Date[llIIiI(0x2e0,'zo1$')]())+llIIiI(0x2c6,'460&')+iliIiI+'）'),(lilIII[llIIiI(0x1d6,'D6B8')](IlllII[llIIiI(0x247,'PjP^')],'-1')||IlllII[llIIiI(0x230,'MgrQ')]===-0x1)&&(iilil=!![]);}else{if(IlllII[llIIiI(0x2f6,'oQVP')]){if(lilIII['MgBgI'](lilIII[llIIiI(0x209,'L^]Z')],lilIII[llIIiI(0x2b2,'6ysd')]))IIII1I=0x1;else{console['log'](''+Ii1ilI+iIIii1+llIIiI(0x2d7,'op[b')+$[llIIiI(0x301,'FU17')](llIIiI(0x27d,'j)J]'),Date[llIIiI(0x304,'J3M(')]())+llIIiI(0x29d,'ZwC]')+IlllII['msg']+'）');if(!signStatusMessages[IlllII[llIIiI(0x2b6,'FU17')]])iilil=!![];}}else lilIII[llIIiI(0x2c8,'MgFE')]!==lilIII['MeSOQ']?i1IIl=I1lll1:console['log'](''+Ii1ilI+iIIii1+llIIiI(0x283,'rN2a')+$[llIIiI(0x275,'axZB')](lilIII[llIIiI(0x30e,'SUjm')],Date['now']())+llIIiI(0x27b,'wawy')+JSON[llIIiI(0x27e,'MgFE')](IlllII));}}break;}}catch(Iil1ii){console['log']('❌\x20未能正确处理\x20'+iIIil1+llIIiI(0x309,'Z7jY')+(Iil1ii[llIIiI(0x2fe,'O(ZK')]||Iil1ii));}}async function il1ll(lill1I){const IIIl1=iI1Ili,Ii1ii1={'qxPlt':function(Ilil11,i1ii1){return Ilil11(i1ii1);},'VkXsy':function(il1ii,llI111){const iI1111=iii1II;return lilIII[iI1111(0x25c,'hGS5')](il1ii,llI111);},'QeVor':lilIII[IIIl1(0x248,'kdP$')]};if(lilIII['nfBfk'](lilIII[IIIl1(0x27a,')%]N')],lilIII['krwLL']))try{const IlllI1=Ii1ii1[IIIl1(0x2e5,'TpkT')](I1iIil,lI1Iil);Ii1ii1[IIIl1(0x1ec,'dOo6')](IlllI1,0x0)&&(i1l1I[IIIl1(0x220,'j)J]')]=IlllI1);}catch{IiilIl[IIIl1(0x278,'YQuH')](Ii1ii1[IIIl1(0x1ea,'kdP$')]);}else{let I1il11='',lI1l11=null,II11l=null,II11i=lilIII[IIIl1(0x2db,'X(p@')],iI1Iii={},liI1ii={};switch(lill1I){case lilIII[IIIl1(0x25e,'YQuH')]:liI1ii={'appId':'4da33','functionId':lilIII[IIIl1(0x1d0,'mj]I')],'appid':lilIII['rODBM'],'body':{'token':iIIii1,'venderId':lilIII[IIIl1(0x295,'j)J]')](parseInt,il1li)||'','activityId':lilIII[IIIl1(0x298,'n0H0')](parseInt,iIIill)||'','type':0x38,'actionType':0x7},'version':'4.4','ua':II11i1},iI1Iii=await H5st[IIIl1(0x2c0,'O(ZK')](liI1ii),I1il11=lilIII['mszie'],II11l=Object['assign']({},iI1Iii[IIIl1(0x2a3,'YQuH')],{'jsonp':IIIl1(0x231,'X(p@')});break;}const lIIiIl={'t':Ill11i,'loginType':'2','x-api-eid-token':lill1i};lI1l11&&Object[IIIl1(0x262,'axZB')](lI1l11,lIIiIl);II11l&&(lilIII[IIIl1(0x30a,'B4zI')](IIIl1(0x2ab,'O(ZK'),lilIII['rPuUx'])?Object[IIIl1(0x256,'oQVP')](II11l,lIIiIl):II1ll1[IIIl1(0x262,'axZB')](IlI1Ii,i11I1I));const iI1Iil={'url':I1il11,'method':II11i,'headers':{'Accept':IIIl1(0x20f,'j)J]'),'Accept-Encoding':lilIII[IIIl1(0x1f6,')%]N')],'Accept-Language':lilIII[IIIl1(0x1dc,')%]N')],'Connection':lilIII[IIIl1(0x2a8,'pq!w')],'Content-Type':lilIII['erZkT'],'Host':lilIII[IIIl1(0x228,'C$S0')],'Referer':IIIl1(0x2c5,'65)x'),'Sec-Fetch-Dest':'script','Sec-Fetch-Mode':lilIII['ReJBd'],'Sec-Fetch-Site':lilIII['LuikI'],'User-Agent':II11i1,'Cookie':iliIil},'params':II11l,'data':lI1l11,'timeout':0x7530};lilIII[IIIl1(0x2ff,'J3M(')](II11i,lilIII[IIIl1(0x263,'pq!w')])&&(delete iI1Iil[IIIl1(0x1ff,'MYen')],delete iI1Iil['headers'][lilIII['GaAEz']]);const il1iI=0x3;let i1iIii=0x0,i1iIil=null,liI1il=![];while(i1iIii<il1iI){const llIlIl=await common[IIIl1(0x267,'B4zI')](iI1Iil);if(!llIlIl['success']){i1iIil=''+Ii1ilI+iIIii1+'\x20➜\x20请求失败（'+llIlIl['error']+'）🚫',i1iIii++;continue;}if(!llIlIl['data']){if(lilIII[IIIl1(0x29c,'&F)W')](IIIl1(0x2e9,'C$S0'),lilIII[IIIl1(0x20c,'TpkT')]))return;else{i1iIil=''+Ii1ilI+iIIii1+IIIl1(0x28e,'e0$n'),i1iIii++;continue;}}Ill11l(lill1I,llIlIl['data']),liI1il=![];break;}lilIII[IIIl1(0x276,'PjP^')](i1iIii,il1iI)&&(console[IIIl1(0x2c1,'O(ZK')](i1iIil),liI1il&&($[IIIl1(0x30f,'hGS5')]=!![]));}}}async function concMain(il1i1=0x1,lIIiIi,liI1iI,iI1Il1,i1iIl1){const ii1ii=iI1Ill,i1lli1={'zWwGg':ii1ii(0x210,'crp['),'FPjcM':function(IIlI1,i1iIli){return IIlI1!==i1iIli;},'IPzYr':ii1ii(0x2a6,'Iu1o'),'mdtAt':ii1ii(0x21e,'MYen'),'lNcWG':function(i1iIll,i1lliI,liI1l1){return i1iIll(i1lliI,liI1l1);},'RGtJB':function(IllIlI){return IllIlI();},'SpCmG':function(IiillI,ili11I){return IiillI<ili11I;},'hffyU':function(li11l,lliiIl){return li11l(lliiIl);},'xEkuO':function(li11i,lliiIi){return li11i===lliiIi;},'LbkXD':function(iiIi1I){return iiIi1I();},'kKlkg':ii1ii(0x286,'e0$n'),'txJnc':ii1ii(0x20b,'nH!2'),'SjJRr':'HfXbG','eyqGn':ii1ii(0x1e8,'n0H0'),'yLnIN':ii1ii(0x1e9,'oQVP'),'pENJA':'ZWVVx','rpkzk':function(IllIl1,ll1Ii){return IllIl1(ll1Ii);}},llIlII=lIIiIi['map'](ll1Il=>ll1Il),IIlII=i1lli1[ii1ii(0x23e,'&F)W')](decodeURIComponent,common['getCookieValue'](liI1iI,i1lli1[ii1ii(0x307,'VKUi')])),lIIiII='【账号'+iI1Il1+'】'+IIlII+'：',i1iIlI=await common['getLoginStatus'](liI1iI);if(!i1iIlI&&i1lli1['xEkuO'](typeof i1iIlI,ii1ii(0x2de,'6ysd'))){if(i1lli1['txJnc']!==i1lli1['SjJRr']){console['log'](lIIiII+'账号无效\x20🚫');return;}else lilIi1[ii1ii(0x242,'VKUi')](IiilII,IliI1I[lI1Iii]);}const li111=notify['create'](iI1Il1,IIlII),liI1lI=common[ii1ii(0x300,'PfkZ')](IIlII),{jsToken:lIIiI1}=await jsTk(liI1lI,i1lli1['eyqGn'],{'bizId':i1lli1[ii1ii(0x25b,'Iu1o')],'v':ii1ii(0x2a9,'crp['),'qs':'token='+lIIiIi[0x0]}),ll1I1={'cookie':liI1iI,'index':iI1Il1,'title':lIIiII,'UA':liI1lI,'message':li111,'jsToken':lIIiI1};let Ii1ili=0x0;async function iI1Ii1(ill1II){const Iii1=ii1ii;if(i1lli1[Iii1(0x246,'Z7jY')](i1lli1[Iii1(0x1d4,'e0$n')],i1lli1[Iii1(0x23c,'crp[')]))await i1lli1['lNcWG'](i1iIl1,ill1II,ll1I1),Ii1ili--,i1lli1[Iii1(0x1f3,'B4zI')](Ii1ill);else{const i1llii=II11Ii[Iii1(0x29a,'ZwC]')](II11Il,i1lli1[Iii1(0x224,'H[Jq')]),l1i1I1=IlI11[Iii1(0x2a7,'4QZf')](i1llii);for(const llIIil in l1i1I1){lilIlI[Iii1(0x1f9,'65)x')](llIIil,l1i1I1[llIIil]);}}}async function Ii1ill(){const I1I1lI=ii1ii;while(i1lli1[I1I1lI(0x1e7,'&F)W')](Ii1ili,il1i1)&&llIlII['length']>0x0){const llIIii=llIlII['shift']();Ii1ili++,await i1lli1['hffyU'](iI1Ii1,llIIii);}}const llIlI1=Math[ii1ii(0x23b,'MYen')](llIlII[ii1ii(0x292,'PfkZ')],il1i1),iI1IiI=[];for(let Ii1I1i=0x0;Ii1I1i<llIlI1;Ii1I1i++){if(i1lli1[ii1ii(0x1f1,'axZB')](i1lli1['pENJA'],i1lli1[ii1ii(0x265,'mj]I')])){IlII1[ii1ii(0x250,'SUjm')](IiI11+'账号无效\x20🚫');return;}else{const Ii1I1l=llIlII[ii1ii(0x27c,'4QZf')]();Ii1ili++,iI1IiI[ii1ii(0x2f8,'YQuH')](i1lli1['rpkzk'](iI1Ii1,Ii1I1l));}}await Promise[ii1ii(0x1d9,'hGS5')](iI1IiI),Ii1ill(),await new Promise(IIlIl=>{const l1iIlI=ii1ii,ili11l={'DhDPn':function(Iiilli,IIlIi){const ii1il=iii1II;return i1lli1[ii1il(0x259,'op[b')](Iiilli,IIlIi);},'ITFoA':l1iIlI(0x2a2,'GBMn'),'GKaGo':function(ili11i,iiIi1l){const iI111I=l1iIlI;return i1lli1[iI111I(0x29b,'VKUi')](ili11i,iiIi1l);},'KFqkP':function(li11I){const IIIlI1=l1iIlI;return i1lli1[IIIlI1(0x22a,'TpkT')](li11I);}},Iiilll=i1lli1[l1iIlI(0x1f4,'e0$n')](setInterval,()=>{const i1lIiI=l1iIlI;ili11l[i1lIiI(0x1f0,'ZwC]')](ili11l['ITFoA'],ili11l[i1lIiI(0x1fb,'ZwC]')])?Ii1ili===0x0&&(ili11l[i1lIiI(0x2c4,'hGS5')](clearInterval,Iiilll),ili11l['KFqkP'](IIlIl)):(IiiIi1=l1ii1[0x2],ii1ll=IliI1l[0x1]);},0x64);});}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
