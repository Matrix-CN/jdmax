/*
活动名称：京豆红包雨 （测试）
环境变量：jd_redRain2021_threads // 控制并发线程数（正整数），默认1，最大10，尽量使用默认值，否则请开启代理运行
        jd_redRain2021_interval // 自定义运行间隔时长（整数，单位毫秒），默认500
        jd_redRain2021_notify // 是否推送通知（true/false），默认不推送
        jd_redRain2021_pinFilter // 账号pin过滤，多个用@进行分割

高并发脚本，谨慎使用并发
活动限制IP严重，建议使用代理
定时请自行修改

cron:1 1 1 1 *

*/

const $ = new Env('京豆红包雨')
var iｉl='jsjiami.com.v7';function Iii11l(){const liIiI=(function(){return[...[iｉl,'tKDFjtBsQfdjQiKaRMQmJEi.cGoRmDU.LuvUI7xS==','4PI1oEIgIEwSQEs6P+I8M+IGToMuGEMzTEAxHoMwToIVLUE9P+MwIUISOq','ySkZWOtcKCko','W5jHmvy3WRtdI8kA','nd4ri8kF','WP09xa','W7ZMLB/MJzRMNlNOJA7LJ6ZMI63LIANVVQ3OROhMO5VMNOxNV5lNUBBMM4FLK4pMR47LU7ZVVyL6W5FdHCoCWQlcL+AzOUwtJoAEVEAxLG','W5DWwSkE','W4tdTCoUCMeff8oTzZJdSSotWRVdQSoReW','5P+95lIQ6lgt57QF5y6E6zQT','W6xdT1FcKW','nCocW7NdMrC','sSoDW4j/','BCkovCkS','A3nDoq','WPG8t8k2uSoOcmk4mgldHG','WRS5W5ZcHq','WR8cDSkPvG','hKGWymoieW','W4T0vSkAx8kyxmkLB0W','5Rs65yQI5BwF57UI5P+d5OUR5lQF5A+A5z6S','ASkAt8kWoSkIrmo+','WPtORQ3MS4FLP7lOT6Dl4PYJW4G','h8kNW6SbxaK','pxG2tCom','W4bBWPj3BMG','W7LhmIhcLtq','W65jkYxdIZaIAg1rgG','W5RdQCoJqqKa','W5TdWO3cPHpdRSoRW4qoohGgBvSrCJlcJ8ksW4eRWQXnW67dQYiGWPROTP/LJPxdNmkDtEI/ToA6HU++R+wMOUs4MoEwI8ow6l216ko25yQl5yM2','W4tdQSkmySoz','W6/cUezisJG','WPm4BSkADG','rK/dUq','mSkUW4jsWRBcRa','ESk6eW','WPP1W7dcT8kRb8omW4CFkeXFAHn1vSkrsaNcIN/dS3C','5y2S6yAv6k2X5PUnW79wWOldLxbWeWC7xq','WRhdGNe','WOFdS3zEW742rG','WPldMcBcGCkP','W4L/umkgb8kDvCk/','zSkipxS','W7rgjsZcKZS1CG','WQ7cRHy','W4DgkcxcJa','FCkIWP3cT8k4','pd9Rna','WPRdUX3cLCk1','rCkLWPK','BmopWRS6WOL5i3pdVNBcVmkdW6K','WPaWAa','W6fBxSknea','eXGxnCkV','kSkXW6nxeG','WQxdM38ZWP8tDCkSWQPnw2i','W4JdKYNcJSo/W6q','lqGUh8kQ','s8kLWORcGCkuBmogb18m','sCozW5HlWQq','oCkuW5eUzW','W7vJdKNcNCk4Cq','WOlcTNFcSG','WOhdTqq','FwHuySooW7CsCKtdKbZcHW','W4vvWQFcSq','W5z1o0egWQ7dLCkTWO5+WR3dKq1h','gCkoWR4R','dSkNW75cha','WQpORkRMSARLK6lLUQPW','44cF5OYy56wf44k56k+k5ywH6i2l5yY+eGmkWR83W78','W6FcVfXo','WOpdVWBdJfHZhCkhs8kyWQ3cUs0DrSoQcColW5ldKra','WOtcMmoUW5C/qmoNkGxdUeZcR8k0W77cQ8oZ','WOdcLCo5W4WWvq','WPhdQgm','mdyxpmkF','W54+W5RcSCkNd8oTWOKKiXWknff1CSkAFW/cGwS','dUITI+AZTowtK+w5SqK','tmkKWOG','A2OSySkEWOe7DSkeW6m','wYHTW6vUW77dQG','A08cW7uzWQaGyaxdO3e','dq8VmCku','zwVdMva','sYlcKw7cSCorW5zjWRy','cmkWW4LogSkIaf3dLG','W4fBWP9rzx8P','mCkqW6HmW4W9','cSk3W6SwuWmvmbPoW6/dRr0Jxa','nmk7W4z0WPRcJcZcTmoTW4bBzCosEvddLWrUWPyPWOJdImkWCmkPkSoiW7D5W7NdJglcRa','W4hKU5ZKUkhOS6pNU6tLJlxPMBVMTyhLI5/cNq'],...(function(){return[...['id4xmq','WP/dO3bnWRyKwvFcHCkF','wtBcNhVdU8kyW5XjWRq4n8keWQ9LAbOh','6lsp5y665PE85PEy','W6xcTerBwYi','W55sWQBcKHRdQ8oE','umouW7tcIG','WO/cL8oGW4a','8lAjHZC','D2rapxVdO8k4W5FdPCkquxO','W47cIwBdKCo2W4hdLCkcW6RcTSozW4VdVG','y31o','W4TLpuyXWRJdI8kqWP1SWP/dJazFW4ZdRHm3WOnBWRe','zCkSimoAwe3cRSkjoajxW6rSWQTffKRcT8kYzNFcICkA','W43dMuJcR0/cQfeb','WQ8Ze8o8W6tcN2C','wqxcSuNcNW','WO8JW6JcU8os','wZtcNh8','WOBcK8o5W7eVxCo2','Fmk8hSoCsfO','CmkcWQ7cR8kP','4PYuFUACTEEESoISMoAYJhi','WOhcHsm','W7TGlCoBWPy','W4hORihMS4/LPPtOTAmq4PYpwUAwL+wrMUw6SUAwUUAoUq','W4tcMhW','c8krW6L5W5O','WPBcNJVcNLGV','c2FcSrNcMXa+','amk3W7y3uWOu','W4hdGmkPtmoTjCoYWOujk1K','W6JcG23dTW3dTb4EAqZdGCkUW7yOkKjvsc/dO8oCW7THmHOUzIldMmkoWRrazueEk20LWOGErXffWR/cQmkkWPqRpZ7cUSomWRdcTSoiWPxcJg7cOmknWQaeW61LlHFcNfdcOGBcVSkMW7uMnLjoCmkFWO/cPmoRWOvTWRbxWP5zECk4WRz+W7K9WQmPWQq7b2PXW6/dPCoUW6JdQ8kxWR4bxhxcUmowtCoXi8ovySoiWRbBibhdUJFcLSoBWORdQN1GW5tdNSkAWR3dNCoQdmkkWQT4m0y1as4oWRXdWQa+DSkoWQCjiW','WOxcUCkNphH7m8kHwX/cISo2','W5BdNdpcN8ozW7NcUCkq','yCkgo2K','W5VdPdFdSqxcI8ofWPrGoCkWWRe','smkScG','5Ps95zgG5BQc5PsM5O6g','r8kpn8osEW','W7VdUMxcHanBlumoWODSbZxdJ8k9Cmk5WORdVZujW4ZdISon','WQ0zDhpdKMPMnJibfCkacCk1W5b9Fw1nW6RdQKmxBmkcuYeiaCosjqTjnMtdVq','WOKKuSk2v8k7kmkJn2VdGCoi','qt15W7HI','rmoyW6LSWObnoSo7hf4EWRbLxJBcQN7cGu/dHSkQW40','oSkAW7TdW7Sm','F8kEqCkTamkFqmo2BW','W5ldJtBcGSo5','WRVdQbGycMn9b8o8WQ4BW6S','WOP8yZ9uW5Kt','W4rfWQP4yW','c1GOtW','fwlcNa','kJOgnmkOWQywA1/dMrpcICoCsIalk8o/W5dcQ3m','lZ92iCk7WQC/DW','m8outmkGlCkKrSoWy2O','rsj7','CSkDfMODhW','feWWsCoL','W7pdSvVcHajVhLagWOqT','lSkEW6jSWPmGz17dQwNcTq','W5zpWOHt','hCkoWO8OWQbdpCoGd38','W5HkWQnazwGiy8oxhg3cHSo4W4vqW73cU39XWOVcSq','WQGJW53cNG','W5lcJx7dQG','zaNcP2dcNG','mXbcWQfDW7nZDJBdUuVdLmkF','8loOJSo+','d8kuWR4lWOL2','4P6fFoIfU+AELEI9LEIISoMbIowiGUs5LoMxHUIUPXi','WQCPW4hcISoGkW','WRddNNe','aCk3W6SJrGu','ASkMcq','WRRdPYmIma','WPSiW7G','WRHFEwNcRW','4P2oW4NMNApOG6FMRjFNOj/LPPhNKy4D','aSoDW6BdRYpdTW','5P6z6iYs5B2j5Aw75zgE772n5y2U6icX5BAv5PAT5BQL5A2T','WQpcGw9Oga','kJTUimkkWR0M','5lUO6lcz6zQl','W5XrzJXaW4isqG','mmkLW5vQWORcNZNcGCo3W5XClCoeouldJGCkWPq','pXXlWQ1wW7X+kvhcSq','W4xdUSo+BJT6gCkVBtRcU8o8','CCkAx8kHhmk4','W5VdKCkQxCoSE8kUW6mxp1KBW6hcQqRcU0JdNmk1W5a','DhJdGq','WQldSZW9jmkEqa','WPxdUwmEWPS'],...(function(){return['hemY','WPRdLZBcTSkOWPRcHG','lSkUWOC3WP8','W5rFDq','BgVdMvldTa','eehcJI3cSG','5BA26k+H57Yn6lAJ6lY96lYt6kc35B2x5yMK6lAA5y6N','WQWUe8owW7C','W5nLuSkEb8kk','WRK6W6RcJmoy','WPTUra','W75urc9g','oZfXm8kgWQK','qCkhhSoKwW','eM/cRq','W43cOcq','W6zTeCoAWOdcRbhcK8ky','W44YWQJcGmkmr8ofWOb2pbmkkfKgwCkBmbFdMIlcSIfVW4BcJe/dKv/cK8oCsSoYs8ksAddcGmociCoCzxldRmotpmk4','WPpORzlMSPZLPjZOTRPH4PYDW6ZMLOFLKOdLUQlMLyxMJ6i','AmkjsG','W5RcLxH1Ba','W5/dQCoWyIiCm8kTzG','W6b1Fa','hLCTwSkHE8orWQb8W5ddImo/DshdMSk4W5e','WRFdJ8o4zcCHp+AuOoAvI+AjIUw0OoI9NoAFRo+/NowmMEwANU+/OG','WPPGuW','WOJcHdi','w8khWOFcL8kT','cH4QoCkR','W5y1W6tcSCkMo8oEWPOSif0','WQhcIxfjia','W5TdWO3cPHpdRSoRW4qoohGgBvSrAZxcLCkXW5OXWRLeWRZdPciV6iwq5AYJ5lIR6l286kk46zEx6zQN5PAu6zEC77606BUQ6kYhWQpcNSkk','W79JBepcImoeASojW6m1','W5pdRCo6BG','WPpdLJu','W5tdOSoJBJ4PoCk0AJpcVa','fCkWW6nea8oKjLZdJeFdKva','ASk6dCohtW','omk4W5e','WOyPd8ojW5C','gCk2W4nbW5m','W57cRtWmbW','rmkqWRJcN3xcQ31xWOddJgRcRa','W4nPia','WOdcSCkQnNf1z8o9pMe','BSkglG','dhlcSrFcKamKoCoM','W4nHmu4XWRJdKCkEWPLTWQ8','6lEh5yYb5PwT5PET','rSkOWPtcKmkyDq','5O2J56AF57In5P2YWQj8WRZdSvPWcWJcSCk6','W4NcTKPzAG','D2Tqz8klWOWsyhJdUa','WPVcPMlcPa','W5BcPYtcUxiXcG','WPFdJsBcKSkYW43dJmoPW7VcSmoxWQBdLmkRsJJdPudcKSog','W6HOEfdcG8oqumo4W7W/WQXrD8oAWQRdNG','WOpdP3Xj','A3nDovZcSmkpW5a','WOpdUW7dJq','W5NdIglcOcu','W5rkWQlcOa8','WQhcGb7cIea','rfnkceK','B2VdGfq','eSohW7ZdNIldVM18WOhdUq','BSkpvmkTamkSqmo9CW','BSkmj30agq','wI3cGwO','W6VcIGS','EMyLW7OC','W7nniYtcTdO9BNXDn8knbCk6W5X+u2TaW6xdUq','W6lcIW8KldRdVmogvKhcRvCwFSkxWQ7dJSkhWRe','D8kWkMGC','W5G1W6i','W79oWOJcJHW','WO3cMCoQ','W4TfCt51W5av','DKGBW7u','WOZdShXyW6X3DLhcNCkCWOFcJG','rmowW6D8W5mMWPlcVGRdLCowW7e','oCkKW5e','WOBcK8o5W6WOxmo6fbldLeNcPmkJW6/cJmoJ','bCk3W6qGvX8c','s8kQe8oJDG','W6H/qqK','W5bbWPnEzw00','W5BdL8kSqSoT','WQlcMCoJW5eJxSoNvYpdRLBcRW','4PYHW6BMNQdOG5ZMRjFNORJLPAhNKlxcGG','WQCJW4G'];}())];}())];}());Iii11l=function(){return liIiI;};return Iii11l();}function iii1II(_0x416ff0,_0x44093e){const _0x34de5f=Iii11l();return iii1II=function(_0x2a32e0,_0x315ec5){_0x2a32e0=_0x2a32e0-0x64;let _0x4648f2=_0x34de5f[_0x2a32e0];if(iii1II['iIalsQ']===undefined){var _0x532266=function(_0x240d59){const _0x1015b7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x23390e='',_0x10827f='';for(let _0x491a76=0x0,_0x2d2a51,_0x4be87d,_0x531898=0x0;_0x4be87d=_0x240d59['charAt'](_0x531898++);~_0x4be87d&&(_0x2d2a51=_0x491a76%0x4?_0x2d2a51*0x40+_0x4be87d:_0x4be87d,_0x491a76++%0x4)?_0x23390e+=String['fromCharCode'](0xff&_0x2d2a51>>(-0x2*_0x491a76&0x6)):0x0){_0x4be87d=_0x1015b7['indexOf'](_0x4be87d);}for(let _0xe9dcb2=0x0,_0x37cad9=_0x23390e['length'];_0xe9dcb2<_0x37cad9;_0xe9dcb2++){_0x10827f+='%'+('00'+_0x23390e['charCodeAt'](_0xe9dcb2)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x10827f);};const _0x350171=function(_0x52c55f,_0x257076){let _0x37f264=[],_0x41290c=0x0,_0x458df8,_0x59dd5d='';_0x52c55f=_0x532266(_0x52c55f);let _0xcf57e2;for(_0xcf57e2=0x0;_0xcf57e2<0x100;_0xcf57e2++){_0x37f264[_0xcf57e2]=_0xcf57e2;}for(_0xcf57e2=0x0;_0xcf57e2<0x100;_0xcf57e2++){_0x41290c=(_0x41290c+_0x37f264[_0xcf57e2]+_0x257076['charCodeAt'](_0xcf57e2%_0x257076['length']))%0x100,_0x458df8=_0x37f264[_0xcf57e2],_0x37f264[_0xcf57e2]=_0x37f264[_0x41290c],_0x37f264[_0x41290c]=_0x458df8;}_0xcf57e2=0x0,_0x41290c=0x0;for(let _0x359f6d=0x0;_0x359f6d<_0x52c55f['length'];_0x359f6d++){_0xcf57e2=(_0xcf57e2+0x1)%0x100,_0x41290c=(_0x41290c+_0x37f264[_0xcf57e2])%0x100,_0x458df8=_0x37f264[_0xcf57e2],_0x37f264[_0xcf57e2]=_0x37f264[_0x41290c],_0x37f264[_0x41290c]=_0x458df8,_0x59dd5d+=String['fromCharCode'](_0x52c55f['charCodeAt'](_0x359f6d)^_0x37f264[(_0x37f264[_0xcf57e2]+_0x37f264[_0x41290c])%0x100]);}return _0x59dd5d;};iii1II['sJDDXW']=_0x350171,_0x416ff0=arguments,iii1II['iIalsQ']=!![];}const _0x412b81=_0x34de5f[0x0],_0x296bb0=_0x2a32e0+_0x412b81,_0x3d40ce=_0x416ff0[_0x296bb0];return!_0x3d40ce?(iii1II['eHZEOI']===undefined&&(iii1II['eHZEOI']=!![]),_0x4648f2=iii1II['sJDDXW'](_0x4648f2,_0x315ec5),_0x416ff0[_0x296bb0]=_0x4648f2):_0x4648f2=_0x3d40ce,_0x4648f2;},iii1II(_0x416ff0,_0x44093e);};const l1l11I=iii1II;(function(lIIill,I11iIi,I1ilII,I11iIl,l1l11l,IilIil,l1iIi){return lIIill=lIIill>>0x5,IilIil='hs',l1iIi='hs',function(l1l11i,l1iIl,illIll,iIli1I,Iiil1){const lilIi=iii1II;iIli1I='tfi',IilIil=iIli1I+IilIil,Iiil1='up',l1iIi+=Iiil1,IilIil=illIll(IilIil),l1iIi=illIll(l1iIi),illIll=0x0;const iiilli=l1l11i();while(!![]&&--I11iIl+l1iIl){try{iIli1I=-parseInt(lilIi(0x114,'SI5J'))/0x1*(parseInt(lilIi(0x107,'ZfmE'))/0x2)+parseInt(lilIi(0x7d,'DCnC'))/0x3+-parseInt(lilIi(0x16a,'j7Y)'))/0x4+-parseInt(lilIi(0x126,'cppx'))/0x5+parseInt(lilIi(0xb9,'RvM$'))/0x6+-parseInt(lilIi(0x174,'SCeJ'))/0x7*(-parseInt(lilIi(0x121,'7wxZ'))/0x8)+parseInt(lilIi(0x104,'%A6('))/0x9;}catch(l1iIIl){iIli1I=illIll;}finally{Iiil1=iiilli[IilIil]();if(lIIill<=I11iIl)illIll?l1l11l?iIli1I=Iiil1:l1l11l=Iiil1:illIll=Iiil1;else{if(illIll==l1l11l['replace'](/[IJFEDUMQKtRSLfuxdGB=]/g,'')){if(iIli1I===l1iIl){iiilli['un'+IilIil](Iiil1);break;}iiilli[l1iIi](Iiil1);}}}}}(I1ilII,I11iIi,function(iiilll,lI11Il,lIII1i,l11i11,IilIl1,lIII1l,l1iIIi){return lI11Il='\x73\x70\x6c\x69\x74',iiilll=arguments[0x0],iiilll=iiilll[lI11Il](''),lIII1i=`\x72\x65\x76\x65\x72\x73\x65`,iiilll=iiilll[lIII1i]('\x76'),l11i11=`\x6a\x6f\x69\x6e`,(0x16a1ab,iiilll[l11i11](''));});}(0x1880,0x29435,Iii11l,0xc6),Iii11l)&&(iｉl=`\xfb4`);const jdCookie=require(l1l11I(0x11a,'NpN6')),common=require(l1l11I(0xab,'3sA!')),notify=require('./utils/Rebels_sendJDNotify');console[l1l11I(0x143,'SI5J')](''),console['log'](l1l11I(0x16c,'%A6(')+$[l1l11I(0x68,'OoBl')]+l1l11I(0xac,'3sA!')),console[l1l11I(0xad,'By3u')]('jd_redRain2021_threads\x20//\x20控制并发线程数，默认1，最大10'),console['log'](l1l11I(0x15f,'Ofnx')),console['log']('jd_redRain2021_notify\x20//\x20是否通知(true/false)，默认不推送'),console[l1l11I(0x7e,'YYNl')](l1l11I(0xa4,'Ofnx')),console['log'](l1l11I(0x139,'cppx')+$[l1l11I(0xea,'XdM6')]+l1l11I(0x172,'0rz5')),console['log']('');let taskThreads=process[l1l11I(0xd6,'HZ3s')][l1l11I(0x10f,'7wxZ')]||'1';const runInterval=process[l1l11I(0xfa,'wr%M')][l1l11I(0xf0,'50XF')]||l1l11I(0xba,'8j(u'),isNotify=(process[l1l11I(0x140,'QDvG')][l1l11I(0x122,'QsyO')]||process[l1l11I(0xd2,'TbQ!')][l1l11I(0xd4,'3sA!')])===l1l11I(0xc8,'Ofnx'),pinFilter=(process[l1l11I(0x12d,'50XF')][l1l11I(0x10b,'eBXU')]||'')[l1l11I(0x112,'Jw^v')]('@');interaction=[];let cookiesArr=Object[l1l11I(0xc5,'ZfmE')](jdCookie)[l1l11I(0x14a,'HfG@')](li1Il=>jdCookie[li1Il])['filter'](li1Ii=>li1Ii);!cookiesArr[0x0]&&($['msg']($[l1l11I(0x161,'%A6(')],l1l11I(0xcd,'50XF')),process[l1l11I(0xf5,'ive*')](0x1));!(async()=>{const lilIl=l1l11I,Iliiii={'bEJLW':function(i1illI){return i1illI();}};notify[lilIl(0x14c,'IDZQ')]({'title':$[lilIl(0x6d,'%[1N')]}),await Iliiii['bEJLW'](Main),isNotify&&notify['getMessage']()&&await notify[lilIl(0x97,'2lU9')]();})()[l1l11I(0xcb,'a[vX')](i1IIl=>$[l1l11I(0xdf,'RvM$')](i1IIl))['finally'](()=>$[l1l11I(0xca,'DCnC')]());async function Main(){const IilIlI=l1l11I,I1lll1={'EkKSv':function(i1IIi,IIII1I){return i1IIi>IIII1I;},'iPdVH':function(Iii111,l1l1II){return Iii111!==l1l1II;},'YHPZR':function(Iil1I1,Ii1iII){return Iil1I1(Ii1iII);},'NiZZj':function(l1i11I,II11II){return l1i11I>=II11II;},'AJmgb':IilIlI(0x88,'^^9N'),'lGWUI':IilIlI(0x10c,'rMaW'),'Gwivf':IilIlI(0x10d,'Ie1K'),'DoGVF':'json','VeFyu':IilIlI(0xd1,'XdM6'),'KAcPE':IilIlI(0x8f,'%A6('),'NPMzv':function(Ii1iI1,lilIli){return Ii1iI1>lilIli;},'IPLan':'2|6|1|4|3|0|5','NAIiQ':function(Iliili,Iliill){return Iliili-Iliill;},'knmEj':function(IIII11,i1illi){return IIII11>i1illi;}};try{try{const I1llil=parseInt(taskThreads);I1lll1[IilIlI(0x6b,'wr%M')](I1llil,0x0)&&I1lll1['iPdVH'](I1llil,0x1)&&(taskThreads=I1llil);}catch{taskThreads=0x1;}taskThreads=Math[IilIlI(0x14e,'wkdi')](taskThreads,0xa),$[IilIlI(0x105,'Jw^v')]=null;if(runInterval)try{const I1llii=I1lll1[IilIlI(0x169,'CF)H')](parseInt,runInterval);I1lll1[IilIlI(0x78,'Ofnx')](I1llii,0x0)&&($[IilIlI(0x119,'IDZQ')]=I1llii);}catch{console[IilIlI(0x87,'2lU9')](I1lll1[IilIlI(0xbb,'@#Qb')]);}const i1illl=IilIlI(0x117,'wkdi')+common[IilIlI(0xe0,'Dt2i')](0xd,I1lll1['lGWUI']);$['UA']=common[IilIlI(0x134,'kLM7')](i1illl),$[IilIlI(0x108,'HHJH')]=common[IilIlI(0x110,'RvM$')](i1illl),$[IilIlI(0x14f,'CF)H')]=common[IilIlI(0x99,'QDvG')](),$['xview2Config']='',await I1lll1[IilIlI(0x154,'rfYk')](sendRequest,I1lll1[IilIlI(0xbd,'a[vX')]);if($[IilIlI(0x164,'a[vX')])for(let lilIll of $[IilIlI(0x13a,'%A6(')][IilIlI(0x100,'wkdi')]||[]){for(let l1i111 of lilIll[IilIlI(0x13b,'NpN6')]||[]){if(['红包雨',IilIlI(0x136,'SCeJ')]['some'](iliII1=>l1i111[IilIlI(0x161,'%A6(')][IilIlI(0xb0,'@#Qb')](iliII1))){let II11I1=l1i111['renderData'][IilIlI(0xaa,'50XF')],Iii11I=l1i111['preDownLoadList'][0x0]['url'],Iil1II;for(let iIIl1I of[II11I1,Iii11I]){if(iIIl1I['includes']('active')){Iil1II=iIIl1I;break;}}if(!Iil1II&&II11I1['includes'](I1lll1[IilIlI(0xf4,'2lU9')]))try{ss=await I1lll1['YHPZR'](jsonurl,II11I1);for(let I1iIli of ss['tpl']['elementList']){if(I1iIli[IilIlI(0x67,'URE*')][IilIlI(0x13d,'%[1N')]['includes'](I1lll1['VeFyu'])){Iil1II=I1iIli[IilIlI(0x137,'SI5J')][IilIlI(0x153,'NpN6')];break;}}}catch(lI1Ill){}if(Iil1II){if(l1i111['rule'][IilIlI(0x155,'%A6(')]){let lI1Ili=l1i111[IilIlI(0x116,'QDvG')][IilIlI(0x111,'NpN6')],IliilI=l1i111[IilIlI(0x175,'ZfmE')][IilIlI(0x141,'k*hO')];const i1II1=$[IilIlI(0x91,'eBXU')](I1lll1['KAcPE'],lI1Ili),iIIl11=$[IilIlI(0x7b,'cppx')](I1lll1[IilIlI(0x6c,'URE*')],IliilI);let l1l1I1=new Date()[IilIlI(0xf6,'XdM6')]();if(I1lll1[IilIlI(0x130,'HfG@')](l1l1I1,IliilI))console['log']('🔚\x20京豆红包雨已经结束');else l1l1I1>lI1Ili?(console['log']('📢\x20发现京豆红包雨，即将开始运行\x0a'),await I1lll1[IilIlI(0xf8,'HZ3s')](redRainurl,Iil1II)):console['log']('📢\x20'+i1II1+'至'+iIIl11+IilIlI(0x90,'TbQ!'));}}}}}if(I1lll1[IilIlI(0x98,'Ie1K')](interaction[IilIlI(0xa6,'rfYk')],0x0))console[IilIlI(0x79,'XdM6')]('🏬\x20共计\x20'+interaction['length']+IilIlI(0xe2,'XdM6'));else return;for(let I1iIll=0x0;I1iIll<interaction[IilIlI(0x12c,'Dt2i')];I1iIll++){const I1lliI=I1lll1[IilIlI(0xda,'SCeJ')]['split']('|');let llIllI=0x0;while(!![]){switch(I1lliI[llIllI++]){case'0':I1iIll!==I1lll1[IilIlI(0x15c,'SCeJ')](interaction[IilIlI(0x12c,'Dt2i')],0x1)&&console[IilIlI(0x77,'3sA!')]('');continue;case'1':$[IilIlI(0x138,'YYNl')]=interaction[I1iIll]['encryptAssignmentId'];continue;case'2':$[IilIlI(0x118,'SCeJ')]=[];continue;case'3':$[IilIlI(0xa0,'QsyO')]=![];continue;case'4':await common['concTask'](taskThreads,cookiesArr,taskFnc);continue;case'5':I1lll1['knmEj']($[IilIlI(0xcf,'OoBl')][IilIlI(0x70,'HHJH')],0x0)&&(cookiesArr=cookiesArr[IilIlI(0xe7,'rfYk')]((I1ilI1,iillll)=>!$['needRemoveCookieIndex'][IilIlI(0xb2,'rMaW')](iillll+0x1)),$[IilIlI(0xef,'8j(u')]=[]);continue;case'6':$[IilIlI(0x65,'TeP%')]=interaction[I1iIll][IilIlI(0xd0,'XdM6')];continue;}break;}}}catch(lIIilI){console[IilIlI(0xee,'URE*')](IilIlI(0x129,'Mm2m')+lIIilI);}}async function taskFnc(II1li1,l1lIlI){const iIli11=l1l11I,IiiIl1={'WGteU':function(Illl1l,Illl1i){return Illl1l==Illl1i;},'RQxFj':function(lIIiil,l1lIii){return lIIiil===l1lIii;},'rMybV':iIli11(0x171,'HZ3s'),'SOWyx':function(I11iI1,l1lIil){return I11iI1>l1lIil;},'eVjLd':function(IiiIli,iillli){return IiiIli!==iillli;},'TYeIk':iIli11(0xdc,'ive*'),'Vnfpd':'dotask','hpehi':'acehby20210924','rvEaL':function(I1l1Ii,I1i11i){return I1l1Ii(I1i11i);},'xGSjw':'application/json,\x20text/plain,\x20*/*','JkbvT':iIli11(0xe5,'ive*'),'MIMEi':iIli11(0x151,'3sA!'),'nyNhx':'application/x-www-form-urlencoded','ZERkI':iIli11(0x13c,'0rz5'),'gIDBH':iIli11(0xf1,'DJVv'),'EjqsZ':iIli11(0x15e,'kLM7'),'vkVJc':iIli11(0x123,'2lU9'),'kEItc':iIli11(0xa2,'rMaW'),'hniia':function(I1i11l,llIlii){return I1i11l===llIlii;},'dlIvS':function(llIlil,IIlil,ilI1lI){return llIlil(IIlil,ilI1lI);},'LpyZY':function(IiiIll,IIlii){return IiiIll>=IIlii;},'ThabD':iIli11(0x11c,'HHJH'),'iWMOP':iIli11(0x83,'QsyO'),'HGHzF':iIli11(0x170,'XdM6'),'EkACl':function(IlI1il,IilliI){return IlI1il(IilliI);}};if($[iIli11(0x9e,'Dt2i')])return{'runEnd':!![]};const lIIil1=IiiIl1[iIli11(0x149,'2lU9')](decodeURIComponent,common['getCookieValue'](II1li1,IiiIl1['ThabD'])),IIli1='【账号'+l1lIlI+'】'+lIIil1+'：',II1liI=notify['create'](l1lIlI,lIIil1);if(IiiIl1[iIli11(0x142,'DCnC')](pinFilter[iIli11(0x12a,'2lU9')],0x0)&&(pinFilter['includes'](lIIil1)||pinFilter['includes'](encodeURIComponent(lIIil1)))){II1liI[iIli11(0x16b,'8j(u')](iIli11(0x146,'SCeJ')),console['log'](II1liI[iIli11(0x7f,'XdM6')]()),$[iIli11(0x74,'rMaW')]['push'](l1lIlI);return;}const IlI1i1=await common['getLoginStatus'](II1li1);if(!IlI1i1&&typeof IlI1i1===IiiIl1[iIli11(0xc0,'SCeJ')]){console[iIli11(0x16d,'HHJH')](IIli1+iIli11(0xe6,'6IH)')),II1liI['fix'](IiiIl1[iIli11(0x10a,'50XF')]),$['needRemoveCookieIndex']['push'](l1lIlI);return;}const l1lIl1=common[iIli11(0xc2,'7wxZ')](lIIil1),IiiIlI=common[iIli11(0xa9,'YYNl')](lIIil1),Iilli1=common[iIli11(0xa3,'%A6(')]();if($[iIli11(0x128,'DCnC')])return{'runEnd':!![]};await IiiIl1['EkACl'](llIll1,'dotask');if($['runEnd'])return{'runEnd':!![]};if($[iIli11(0x9c,'NpN6')])await $[iIli11(0x8e,'@#Qb')]($[iIli11(0x8a,'8j(u')]);function I1l1Il(IlI1ii,lIIiii){const Iiiil=iIli11;try{switch(IlI1ii){case Iiiil(0xa1,'rMaW'):if(lIIiii&&IiiIl1[Iiiil(0xbc,'SCeJ')](lIIiii['subCode'],0x0)){const iI1lli=lIIiii['rewardsInfo']?.[Iiiil(0xc9,'8j(u')],ll1iI=lIIiii[Iiiil(0x102,'0rz5')]?.[Iiiil(0x16f,'8j(u')];if(iI1lli&&IiiIl1['RQxFj'](typeof iI1lli,IiiIl1[Iiiil(0x15b,'HZ3s')])&&Array['isArray'](iI1lli[0x3])&&IiiIl1['SOWyx'](iI1lli[0x3]['length'],0x0)){const iI1lll=iI1lli[0x3][0x0];let l1lIll=''+iI1lll['rewardName'];console[Iiiil(0x72,'CF)H')](IIli1+'['+l1lIll+']'),II1liI[Iiiil(0xbf,'Jw^v')](l1lIll);}else IiiIl1['eVjLd'](typeof ll1iI,IiiIl1['TYeIk'])&&Array['isArray'](ll1iI)?ll1iI[Iiiil(0xf2,'Mm2m')](function(I1l1II){const Iiiii=Iiiil;console[Iiiii(0x143,'SI5J')](''+IIli1+I1l1II[Iiiii(0x156,'TeP%')]+'['+I1l1II[Iiiii(0x160,'TeP%')]+']');}):console[Iiiil(0x11b,'6IH)')](IIli1+Iiiil(0x133,'0rz5'));}else lIIiii[Iiiil(0x12b,'By3u')]?console[Iiiil(0xc6,'OoBl')](''+IIli1+lIIiii[Iiiil(0x166,'YYNl')]):console['log']('❓'+IlI1ii+'\x20'+JSON[Iiiil(0x16e,'wkdi')](lIIiii));break;}}catch(IIli1I){console[Iiiil(0x77,'3sA!')](Iiiil(0x86,'a[vX')+IlI1ii+Iiiil(0xd5,'7wxZ')+(IIli1I['message']||IIli1I));}}async function llIll1(I1i11I){const l11i1I=iIli11;if($[l11i1I(0x132,'j7Y)')])return;let llIliI='',I1l1I1=null,I1i111=null,ilI1li=l11i1I(0xfd,'rfYk');switch(I1i11I){case IiiIl1[l11i1I(0xfe,'RvM$')]:I1l1I1={'completionFlag':!![],'sourceCode':IiiIl1[l11i1I(0x10e,'6IH)')],'encryptProjectId':$['encryptProjectId'],'encryptAssignmentId':$['encryptAssignmentId']},llIliI='https://api.m.jd.com/client.action?client=wh5&clientVersion=1.0.0&appid=redrain-2021&functionId=doInteractiveAssignment&body='+IiiIl1['rvEaL'](encodeURIComponent,JSON[l11i1I(0x150,'^^9N')](I1l1I1));break;default:console[l11i1I(0x79,'XdM6')]('❌\x20未知请求\x20'+I1i11I);return;}const IIliI={'url':llIliI,'method':ilI1li,'headers':{'Accept':IiiIl1[l11i1I(0x73,'cppx')],'Accept-Encoding':IiiIl1[l11i1I(0x173,'rfYk')],'Accept-Language':IiiIl1['MIMEi'],'Connection':l11i1I(0x9a,'@#Qb'),'Content-Type':IiiIl1[l11i1I(0xfb,'^^9N')],'Cookie':II1li1,'J-E-H':Iilli1,'J-E-C':IiiIlI,'Origin':IiiIl1[l11i1I(0x125,'ive*')],'Referer':'https://pro.m.jd.com','x-rp-client':IiiIl1[l11i1I(0xf3,'ive*')],'Sec-Fetch-Dest':IiiIl1[l11i1I(0x92,'j7Y)')],'Sec-Fetch-Mode':IiiIl1[l11i1I(0x115,'QsyO')],'Sec-Fetch-Site':IiiIl1['kEItc'],'User-Agent':l1lIl1},'params':I1i111,'data':I1l1I1,'timeout':0x7530};IiiIl1['hniia'](ilI1li,'GET')&&(delete IIliI['data'],delete IIliI[l11i1I(0x80,'Dt2i')]['Content-Type']);const ilI1ll=0x1;let Iillii=0x0,IlI1iI=null,Iillil=![];while(Iillii<ilI1ll){const l1lIli=await common[l11i1I(0x135,'IDZQ')](IIliI);if(!l1lIli[l11i1I(0xde,'QsyO')]){IlI1iI='🚫\x20'+I1i11I+'\x20请求失败\x20➜\x20'+l1lIli[l11i1I(0x147,'Mm2m')],Iillii++;continue;}if(!l1lIli[l11i1I(0x93,'7wxZ')]){IlI1iI=l11i1I(0xeb,'DJVv')+I1i11I+l11i1I(0x152,'0rz5'),Iillii++;continue;}IiiIl1['dlIvS'](I1l1Il,I1i11I,l1lIli[l11i1I(0x71,'ive*')]),Iillil=![];break;}IiiIl1['LpyZY'](Iillii,ilI1ll)&&(console[l11i1I(0xb8,'HZ3s')](IlI1iI),Iillil&&($['outFlag']=!![]));}}async function handleResponse(lIIiiI,II1lil){const IiII=l1l11I,IIli1l={'FdVrV':IiII(0xbe,'By3u'),'DILHm':function(II1lii,lIIii1){return II1lii===lIIii1;}};try{switch(lIIiiI){case IIli1l[IiII(0x14b,'SI5J')]:IIli1l[IiII(0x168,'RvM$')](II1lil['code'],0x0)&&II1lil[IiII(0xb6,'IDZQ')]?$[IiII(0xec,'URE*')]=II1lil[IiII(0x95,'URE*')]:console[IiII(0x162,'k*hO')](JSON[IiII(0x6f,'NpN6')](II1lil));break;}}catch(ll1i1){console[IiII(0x15a,'wr%M')](IiII(0x131,'HHJH')+lIIiiI+IiII(0xcc,'rfYk')+(ll1i1['message']||ll1i1));}}async function sendRequest(IIli1i){const llIIli=l1l11I,I1iIi1={'DUrgA':'1.1.0','wOROF':'xview2Config','bjUIV':llIIli(0x12f,'Ofnx'),'DblKK':llIIli(0x157,'QDvG'),'Kyzdu':llIIli(0xe1,'YYNl'),'OunpR':'api.m.jd.com','eBOwt':llIIli(0x64,'k*hO'),'NOaLf':llIIli(0x6a,'Ofnx'),'HVXVC':llIIli(0x106,'HHJH'),'uYcrh':llIIli(0x11f,'RvM$'),'nkpsF':function(IliI1l,lliiil){return IliI1l===lliiil;},'ThcBC':'GET','EXgEy':llIIli(0x85,'XdM6'),'TFTjU':function(lliiii,IliI1i){return lliiii<IliI1i;},'MBSbE':function(ll1ii,IIli11){return ll1ii>IIli11;},'IjoLn':function(IllIII,ii1li,IIll1){return IllIII(ii1li,IIll1);}};if($['runEnd']||$['outFlag'])return;let lliil1='',IIllI=null,lliilI=null,lili1=llIIli(0x82,'SI5J'),ll1l1={};switch(IIli1i){case llIIli(0x7c,'TbQ!'):lliil1='https://api.m.jd.com/client.action?functionId=xview2Config&clientVersion=11.3.2&build=98450&client=android&ef=1&ep=%7B%22hdid%22%3A%22JM9F1ywUPwflvMIpYPok0tt5k9kW4ArJEU3lfLhxBqw%3D%22%2C%22ts%22%3A1668133263098%2C%22ridx%22%3A-1%2C%22cipher%22%3A%7B%22area%22%3A%22CJvpCJYmCV81CNS4C182Ctq4Dm%3D%3D%22%2C%22d_model%22%3A%22Vu9RBUPCCNK%3D%22%2C%22wifiBssid%22%3A%22dW5hbw93bq%3D%3D%22%2C%22osVersion%22%3A%22CJK%3D%22%2C%22d_brand%22%3A%22IPVLV0VT%22%2C%22screen%22%3A%22CtS2DIenCNqm%22%2C%22uuid%22%3A%22DJruCNK5DtGmZNqmDQO2Zq%3D%3D%22%2C%22aid%22%3A%22DJruCNK5DtGmZNqmDQO2Zq%3D%3D%22%2C%22openudid%22%3A%22DJruCNK5DtGmZNqmDQO2Zq%3D%3D%22%7D%2C%22ciphertype%22%3A5%2C%22version%22%3A%221.2.0%22%2C%22appname%22%3A%22com.jingdong.app.mall%22%7D&st=1668148535443&sign=7dd658a66305f1485c5f38d77e02f194&sv=121',ll1l1={'body':{'api-version':I1iIi1[llIIli(0x9f,'QDvG')]}},lliilI={'functionId':I1iIi1[llIIli(0xa5,'0rz5')]},IIllI='lmt=0&body={\x22api-version\x22:\x221.1.0\x22}';break;default:console['log'](llIIli(0xf9,'IDZQ')+IIli1i);return;}const IllIIi={'url':lliil1,'method':lili1,'headers':{'Accept':I1iIi1[llIIli(0xa7,'Ie1K')],'Accept-Encoding':I1iIi1[llIIli(0x81,'50XF')],'Accept-Language':'zh-Hans-CN;q=1,\x20en-CN;q=0.9,\x20zh-Hant-CN;q=0.8','Connection':llIIli(0xe4,'TbQ!'),'Content-Type':I1iIi1[llIIli(0x89,'HZ3s')],'J-E-H':$['JEH'],'J-E-C':$[llIIli(0xb3,'wr%M')],'Host':I1iIi1[llIIli(0x167,'Mm2m')],'Origin':I1iIi1[llIIli(0xb7,'k*hO')],'Sec-Fetch-Dest':I1iIi1[llIIli(0x14d,'50XF')],'Sec-Fetch-Mode':I1iIi1[llIIli(0x69,'eBXU')],'Sec-Fetch-Site':I1iIi1[llIIli(0x76,'HHJH')],'User-Agent':$['UA']},'params':lliilI,'data':IIllI,'timeout':0x7530};I1iIi1['nkpsF'](lili1,I1iIi1[llIIli(0xb5,'HZ3s')])&&(delete IllIIi[llIIli(0xe3,'SCeJ')],delete IllIIi['headers'][I1iIi1['EXgEy']]);const IllIIl=0x1;let IiiIi1=0x0,l1ii1=null,ii1ll=![];while(I1iIi1[llIIli(0xc3,'Dt2i')](IiiIi1,IllIIl)){I1iIi1['MBSbE'](IiiIi1,0x0)&&await $[llIIli(0x124,'DJVv')](0x3e8);const ll1il=await common[llIIli(0xd8,'6IH)')](IllIIi);if(!ll1il[llIIli(0x7a,'SI5J')]){l1ii1=llIIli(0x127,'0rz5')+IIli1i+llIIli(0x9d,'3sA!')+ll1il[llIIli(0x165,'50XF')],IiiIi1++;continue;}if(!ll1il['data']){l1ii1='🚫\x20'+IIli1i+llIIli(0xfc,'XdM6'),IiiIi1++;continue;}await I1iIi1['IjoLn'](handleResponse,IIli1i,ll1il[llIIli(0xb1,'HHJH')]),ii1ll=![];break;}IiiIi1>=IllIIl&&(console[llIIli(0x87,'2lU9')](l1ii1),ii1ll&&($[llIIli(0xc4,'Alsg')]=!![],$[llIIli(0x13e,'J0zT')]&&$[llIIli(0x101,'Dt2i')]['fix'](l1ii1)));}async function jsonurl(IiiIiI){const lIII1I=l1l11I,lilii={'Znnej':lIII1I(0xa8,'%[1N'),'rWqWv':lIII1I(0x103,'DJVv')},l1iiI=await common['request']({'url':IiiIiI,'method':lilii[lIII1I(0xb4,'rMaW')],'headers':{'User-Agent':lilii['rWqWv']},'proxy':null,'debug':![],'timeout':0x7530}),ll1li=l1iiI[lIII1I(0x120,'QsyO')];return ll1li;}async function redRainurl(Illl1I){const illIlI=l1l11I,lliiiI={'HTuHs':illIlI(0xfd,'rfYk'),'uqllu':function(I1ilIi,IiiiI){return I1ilIi>IiiiI;},'oGMSL':illIlI(0x9b,'%[1N')},lilil={'url':Illl1I,'method':lliiiI[illIlI(0x13f,'By3u')],'headers':{'Cookie':cookiesArr[0x1],'User-Agent':$['UA']},'timeout':0x7530},ll1ll=0x5;let Illl11=0x0,ii1lI=null,I1ilIl=![];while(Illl11<ll1ll){lliiiI[illIlI(0x12e,'J0zT')](Illl11,0x0)&&await $[illIlI(0x66,'TbQ!')](0x3e8);const llIlli=await common['request'](lilil);if(!llIlli[illIlI(0xae,'TbQ!')]){ii1lI=''+llIlli[illIlI(0x84,'0rz5')],Illl11++;llIlli[illIlI(0x148,'@#Qb')]&&([0x193,0x1ed]['includes'](llIlli[illIlI(0xf7,'50XF')])&&(I1ilIl=!![]));continue;}if(!llIlli[illIlI(0xe3,'SCeJ')]){ii1lI=illIlI(0x109,'By3u'),Illl11++;continue;}llIlli[illIlI(0xce,'rfYk')][illIlI(0x144,'%[1N')](/(活动已经结束)/)&&llIlli[illIlI(0xdb,'%[1N')][illIlI(0xaf,'k*hO')](/(活动已经结束)/)[0x1]&&($[illIlI(0xff,'wr%M')]=!![],console[illIlI(0x143,'SI5J')](lliiiI[illIlI(0x145,'wkdi')]));let llIlll=llIlli[illIlI(0x120,'QsyO')]?.[illIlI(0x11d,'QDvG')](/__api_data__ *= *(\{.*?\});/);if(!llIlll){ii1lI=illIlI(0x8d,'HfG@'),Illl11++;continue;}if(llIlll){let lliii1=JSON['parse'](llIlll[0x1]);for(let Iiii1 of lliii1?.['floorList']||[]){if(Iiii1?.[illIlI(0x11e,'eBXU')]?.[illIlI(0xd9,'cppx')]){let lIIili=JSON[illIlI(0x8b,'SCeJ')](Iiii1[illIlI(0x15d,'3sA!')]['interaction']);if(lIIili?.['encryptProjectId']&&lIIili?.[illIlI(0x75,'CF)H')]){$['interaction']=lIIili,interaction[illIlI(0x94,'NpN6')]($[illIlI(0x96,'Ie1K')]);break;}}}if(!$[illIlI(0x163,'%A6(')]){var I11iII=JSON[illIlI(0x8b,'SCeJ')](lliii1['shieldResult'][illIlI(0xdd,'a[vX')]);console[illIlI(0x159,'HfG@')](I11iII);I11iII&&I11iII[illIlI(0x6e,'j7Y)')]&&(title=I11iII[illIlI(0xd3,'SCeJ')],bottomText=I11iII[illIlI(0xc1,'HZ3s')]);ii1lI=illIlI(0x158,'%A6(')+title+illIlI(0xe9,'j7Y)')+bottomText,Illl11++;continue;}}break;}Illl11>=ll1ll&&(console[illIlI(0x8c,'Ie1K')](ii1lI),I1ilIl&&($[illIlI(0xe8,'Ofnx')]=!![]));}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
